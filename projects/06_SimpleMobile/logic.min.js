(function(){var t,e,n,s,o,r=(t=["src/cursor.png","src/cursor2.png","src/spr_logo.png","src/bg_intro.jpg","src/txt_intro.png","src/intro_string.png","src/spr_disclaimer.png","src/spr_cheer.png","src/instruction.png","src/sandtimer.png","src/replay.png","src/sandtimer.png","src/bg_end.jpg","src/learnmore.png","src/spr_copy.png","src/spr_legal.png","src/spr_message.png","src/spr_strings.png","src/greenglow.png"],e=["https://cdnjs.cloudflare.com/ajax/libs/gsap/3.11.5/gsap.min.js","https://cdnjs.cloudflare.com/ajax/libs/howler/2.2.3/howler.min.js"],n=0,s=t.length+e.length,o="ontouchstart"in document.documentElement,{loadedAssets:n,totalAssets:s,init_Images:t,init_JS:e,is_mobile:o}),i=function(){function t(){e(r.init_Images),s(r.init_JS)}function e(t){for(let e=0;e<t.length;e++){let n=t[e];$("<img />").attr("src",n).on("load",o)}}function n(t){for(let e=0;e<t.length;e++){let n=t[e];$("<img />").attr("src",n).on("load",i)}}function s(t){for(let e=0;e<t.length;e++){let n=t[e];$.getScript(n,o)}}function o(){r.loadedAssets+=1,r.loadedAssets==r.totalAssets&&l.init()}function i(){r.otherAssets+=1}return{init:t,loadotherImages:n}}(),a={},l=function(){function t(){a.introPanel=$("#introPanel"),a.stringPanel=$("#stringPanel"),a.cheerPanel=$("#cheerPanel"),a.sandTimer=$("#sandTimer"),a.topSand=$("#topSand"),a.midSand=$("#midSand"),a.hidSand=$("#hidSand"),a.botSand=$("#botSand"),a.crosshair=$("#crosshair"),a.canvasHolder=$("#canvasHolder"),a.txt_cheer=$("#txt_cheer"),a.btn_replay=$("#btn_replay"),a.instruction=$("#instruction"),a.canvasHolder=$("#canvasHolder"),a.cursorHolder=$("#cursorHolder"),a.bg_end=$("#bg_end"),a.txt_message=$("#txt_message"),a.spr_copy=$("#spr_copy"),a.spr_legal=$("#spr_legal"),a.intro_string=$("#intro_string"),a.left_string=$("#left_string"),a.right_string=$("#right_string"),a.cursorHolder2=$("#cursorHolder2"),a.sidePanel=$("#sidePanel"),a.greenglow=$("#greenglow"),a.dim=$("#dim"),a.simcard=$("#simcard"),a.spr_disclaimer=$("#spr_disclaimer"),a.button=$(".button"),a.s1=$(".s1"),a.s3=$(".s3"),a.timer=null,a.status=null,a.initBGM=!0,a.strings=[],a.stringID=null,a.zero=0,a.gametime=!1,a.targetCount=30,a.readytocut=!1,a.stringPosY=["-240px","-360px","-480px","-600px","-720px","-840px"],a.wiggle=15,a.initMobile=!0,a.mouseIsDown=!1,a.hitInterval=null,a.step_1=!0,a.cheerInterval=null,a.cuts=0,a.time=20,a.timeInterval=null,gsap.ticker.lagSmoothing(!1),r.is_mobile?($("#txt_intro").css("background-image","url(src/txt_intro_mob.png)"),$("#instruction").css("background-image","url(src/instruction_mob.png)"),a.spr_legal.addClass("mobile"),a.spr_disclaimer.addClass("mobile"),$("#ie_cursor").remove()):($("#ie_cursor").css("background-image","url("+r.init_Images[1]+")"),a.button.css("cursor","pointer")),c.fn_STEP1()}return{init:t}}(),c=function(){function t(){function t(){gsap.to(a.simcard,.5,{delay:.1,left:335,top:325,ease:"back.in",onComplete:function(){gsap.set(a.left_string,{width:400}),gsap.set(a.right_string,{left:400}),gsap.to(a.left_string,.2,{left:-400,scaleX:.5}),gsap.to(a.right_string,.2,{left:1e3,scaleX:.5,onComplete:function(){setTimeout(function(){u.init(),gsap.to(a.introPanel,.2,{autoAlpha:0}),gsap.fromTo(a.sidePanel,.2,{left:-161,display:"block"},{left:0,onComplete:e})},3e3)}})}})}function n(t,e){return Math.random()*(e-t+1)+t}var o=gsap.timeline({onComplete:function(){gsap.set(a.simcard,{background:"url("+r.init_Images[1]+") no-repeat"}),t()}});d.init(),a.button.on("click",s),o.to(a.s1,.5,{delay:.1,alpha:1}).to(a.intro_string,.1,{rotation:n(-1,1),x:n(-5,5),y:n(-3,3)}).to(a.intro_string,.1,{rotation:n(-1,1),x:n(-5,5),y:n(-3,3)}).to(a.intro_string,.1,{rotation:n(-1,1),x:n(-5,5),y:n(-3,3)}).to(a.intro_string,.1,{rotation:n(-1,1),x:n(-5,5),y:n(-3,3)})}function e(){a.gametime=!0,a.introPanel.hide(),gsap.killTweensOf([a.s3,a.spr_disclaimer]),gsap.set([a.s3,a.btn_replay],{display:"none",autoAlpha:0}),gsap.set([a.cheerPanel,a.stringPanel,a.instruction,a.canvasHolder],{display:"block",autoAlpha:1}),a.canvasHolder.css({cursor:"none"}),gsap.set([a.spr_copy,a.bg_end],{alpha:0,backgroundPositionY:"0"}),gsap.set(a.spr_disclaimer,{left:294,autoAlpha:1}),p.init(),g.start(),a.readytocut=!0,a.cuts=0,a.time=20,a.hitInterval=setInterval(i,1),a.timeInterval=setInterval(l,1e3),a.initBGM&&(a.initBGM=!1,a.sndURL[0].play())}function n(){var t=gsap.timeline();a.gametime=!1,clearTimeout(a.timer),clearInterval(a.hitInterval),clearInterval(a.cheerInterval),clearInterval(a.timeInterval),gsap.killTweensOf("*"),a.strings.length==a.zero?gsap.set(a.txt_message,{backgroundPositionY:"0"}):gsap.set(a.txt_message,{backgroundPositionY:"-36px"}),t.set([a.cheerPanel,a.stringPanel,a.instruction,a.canvasHolder,a.sandTimer],{display:"none"}).set(a.bg_end,{display:"block",autoAlpha:1}).fromTo(a.greenglow,1,{scale:0,autoAlpha:0},{scale:1,autoAlpha:1}).set(a.spr_copy,{autoAlpha:1,backgroundPositionY:"-532px"}).to(a.greenglow,1,{autoAlpha:0}).set(a.spr_disclaimer,{autoAlpha:0},"+=1").set(a.btn_replay,{display:"block",autoAlpha:1}).fromTo(a.s3,.5,{display:"block",autoAlpha:0},{autoAlpha:1}),g.reset()}function s(){switch(this.id){case"btn_replay":a.strings!=a.zero&&p.remove(),e();break;case"btn_findfreedom":window.open("https://www.simplemobile.com/","_blank")}}function o(t,e){var n=t.offset().left,s=t.offset().top,o=t.outerHeight(!0),r=t.outerWidth(!0),i=s+o,a=n+r,l=e.offset().left,c=e.offset().top,g=e.outerHeight(!0),p=e.outerWidth(!0),u=c+g,d=l+p;return!(i<c||s>u||a<l||n>d)}function i(){if(a.mouseIsDown&&a.readytocut&&a.gametime)for(var t=0;t<a.targetCount;)o(a.crosshair,$("#"+a.strings[a.strings.length-1]+" .target"+t))&&a.strings.length>a.zero&&(a.readytocut=!1,p.cut($("#"+a.strings[a.strings.length-1]+" .target"+t).offset().left)),t++}function l(){a.time==a.zero?clearInterval(a.timeInterval):a.time<=5&&a.cuts!=a.zero&&(gsap.set(a.txt_cheer,{backgroundPositionY:-168}),gsap.set(a.cheerPanel,{autoAlpha:1,display:"block"})),a.time--}return{fn_STEP1:t,fn_STEP2:e,fn_STEP3:n}}(),g=function(){function t(){function t(){gsap.to(a.hidSand,e-.25,{top:-25,ease:"power2.in",onComplete:function(){gsap.to(a.hidSand,.25,{top:0,ease:"none",onComplete:n})}}),gsap.fromTo(a.botSand,e,{autoAlpha:1},{top:71,ease:"none"})}var e=20;gsap.to(a.sandTimer,.5,{rotation:0,onComplete:function(){gsap.to(a.topSand,.1,{top:10,ease:"none",onComplete:function(){gsap.fromTo(a.midSand,.1,{autoAlpha:1},{top:52,ease:"none",onComplete:t})}})}}),a.cheerInterval=setInterval(function(){gsap.set(a.txt_cheer,{alpha:0}),gsap.set(a.txt_cheer,{delay:.5,alpha:1})},3e3),a.sandTimer.show()}function e(){gsap.set(a.txt_cheer,{backgroundPositionY:0}),gsap.set(a.sandTimer,{rotation:180}),gsap.set(a.topSand,{top:-15}),gsap.set(a.botSand,{top:128,autoAlpha:0}),gsap.set(a.midSand,{top:-9,autoAlpha:0}),gsap.set(a.hidSand,{top:-56})}function n(){a.gametime&&c.fn_STEP3()}return{start:t,reset:e}}(),p=function(){function t(){for(let t=0;t<20;t++)e()}function e(){var t=60,e=a.stringPosY[o(0,6)],n=o(-90,90);a.stringID="string_"+a.strings.length,a.stringPanel.append("<div id="+a.stringID+' class="strings"><div class="string"></div></div>'),gsap.set("#"+a.stringID,{width:1020,height:50,rotation:n,background:"transparent"}),n>=-20&&n<=20?gsap.set("#"+a.stringID,{left:o(-150,-70),top:o(145,310)}):n<=-60||n>=60?gsap.set("#"+a.stringID,{left:o(-322,70),top:o(100,300)}):gsap.set("#"+a.stringID,{left:-110,top:o(160,290)}),gsap.set("#"+a.stringID+" .string",{backgroundPositionY:e});for(let e=0;e<a.targetCount;e++)$("#"+a.stringID).append('<div class="target target'+e+'" style="left:'+t+'px"></div>'),t+=30;a.strings.push(a.stringID),r()}function n(){for(let t=a.strings.length-1;t>-1;t--)$("#"+a.strings[t]).remove(),a.strings.pop()}function s(t){function e(){$("#"+a.strings[a.strings.length-1]).remove(),a.strings.pop(),r(),a.readytocut=!0}var n=gsap.timeline({onComplete:e});$("#"+a.strings[a.strings.length-1]).append('<div class="cut_left spr_strings"></div><div class="cut_right spr_strings"></div>'),n.set($("#"+a.strings[a.strings.length-1]+" .string"),{alpha:0}).fromTo($("#"+a.strings[a.strings.length-1]+" .cut_left"),.14,{alpha:1,left:t-1020},{alpha:1,left:-760,scaleX:.5,ease:"power1.in"}).fromTo($("#"+a.strings[a.strings.length-1]+" .cut_right"),.14,{alpha:1,left:t-20},{alpha:1,left:770,scaleX:.5,ease:"power1.in"},"<"),a.cuts==a.zero?(clearInterval(a.cheerInterval),a.cheerPanel.hide()):1==a.cuts&&(a.time>=15?(gsap.set(a.txt_cheer,{backgroundPositionY:-56}),gsap.to(a.cheerPanel,.2,{delay:3,autoAlpha:0})):(gsap.set(a.txt_cheer,{backgroundPositionY:-112}),gsap.to(a.cheerPanel,.2,{delay:3,autoAlpha:0})),gsap.set(a.cheerPanel,{autoAlpha:1,display:"block"})),a.cuts++;var s=o(1,6);a.sndURL[s].currentTime=0,a.sndURL[s].play()}function o(t,e){return t=Math.ceil(t),e=Math.floor(e),Math.floor(Math.random()*(e-t))+t}function r(){var t=a.strings.length-1;if(a.strings.length<=20){var e=a.strings.length/20;if(gsap.to([a.bg_end,a.spr_copy],.2,{alpha:1-e.toFixed(1)}),e==a.zero)c.fn_STEP3();else{if(!a.gametime)return;1==a.strings.length?gsap.set(a.spr_copy,{backgroundPositionY:"-266px"}):gsap.set(a.spr_copy,{backgroundPositionY:"0"}),gsap.set(".strings",{zIndex:0}),gsap.set(a.dim,{zIndex:1}),gsap.set("#string_"+t,{zIndex:2})}}}return{init:t,remove:n,cut:s,randomInt:o}}(),u=function(){function t(){function t(){this.x1=0,this.y1=0,this.x2=0,this.y2=0,this.width=15,this.height=15,this.alpha=1,this.radius=15}function e(t){r.is_mobile?(t.preventDefault(),t.touches?(H=t.touches[0].offsetX/y,T=t.touches[0].offsetY/y):M?(H=t.originalEvent.touches[0].offsetX/y,T=t.originalEvent.touches[0].offsetY/y):(H=t.originalEvent.touches[0].clientX,T=t.originalEvent.touches[0].clientY)):M?(H=(t.pageX-I)/y,T=(t.pageY-P)/y):(H=t.clientX-I,T=t.clientY-P),Y=H,C=T,j.src=r.init_Images[1],o(),a.mouseIsDown=!0}function n(t){j.src=r.init_Images[0],u.shadowBlur=0,o(),a.mouseIsDown=!1}function s(e){Y=H,C=T,r.is_mobile?(e.preventDefault(),e.touches?M?(H=(e.touches[0].pageX-I)/y,T=(e.touches[0].pageY-P)/y):(H=e.touches[0].clientX,T=e.touches[0].clientY):M?(H=(e.originalEvent.touches[0].pageX-I)/y,T=(e.originalEvent.touches[0].pageY-P)/y):(H=e.originalEvent.touches[0].clientX,T=e.originalEvent.touches[0].clientY)):M?(H=(e.pageX-I)/y,T=(e.pageY-P)/y):(H=e.clientX-I,T=e.clientY-P),a.mouseIsDown&&(X[z]=new t,X[z].x1=Y,X[z].y1=C,X[z].x2=H,X[z].y2=T,z++),o(),gsap.set(a.crosshair,{left:H,top:T})}function o(){r.is_mobile?(u.clearRect(0,0,960,500),u.drawImage(j,H-10,T-54,A,S)):$("#ie_cursor").css({left:H-10+"px",top:T-54+"px"})}function i(){d=1e3/k,m=Date.now(),m,l()}function l(){var t=0;if(requestAnimationFrame(l),h=Date.now(),f=h-m,f>d)for(m=h-f%d,g.clearRect(0,0,960,500),t=0;t<z;t++)X[t].alpha-=D,X[t].radius-=E,X[t].alpha<=0?(X.splice(t,1),z--):X[t].radius<=0?(X.splice(t,1),z--):(g.globalAlpha=X[t].alpha,g.lineWidth=X[t].radius,g.strokeStyle="#54dd07",g.beginPath(),g.moveTo(X[t].x1,X[t].y1),g.lineTo(X[t].x2,X[t].y2),g.stroke(),g.lineWidth=.35*X[t].radius,g.strokeStyle="white",g.beginPath(),g.moveTo(X[t].x1,X[t].y1),g.lineTo(X[t].x2,X[t].y2),g.stroke())}var c,g,p,u,d,h,m,f,_,v,b,w,y,x,I,P,k=60,A=145,S=151,H=0,T=0,Y=0,C=0,D=.05,E=.8,X=[],z=0,M=!1,j=new Image;if(j.src=r.init_Images[0],c=document.getElementById("trailHolder"),g=c.getContext("2d"),p=document.getElementById("cursorHolder"),u=p.getContext("2d"),_=$("#container").css("transform"),"none"!=_){M=!0;try{v=_.split("(")[1],v=v.split(")")[0],v=v.split(","),b=v[0],w=v[1],y=Math.sqrt(b*b+w*w)}catch(t){y=1}}else M=!1,y=1;x=a.canvasHolder.offset(),I=x.left,P=x.top,r.is_mobile?($(window).on("touchend",n),a.canvasHolder.on("touchstart",e),a.canvasHolder.on("touchmove",s)):($(window).on("mousedown",e),$(window).on("mouseup",n),a.canvasHolder.on("mousemove",s)),$(window).on("blur",n),i()}return{init:t}}(),d=function(){function t(){a.btn_sound=$("#btn_sound"),a.sound=$("#sound"),a.sndURL=[new Howl({src:["src/audio/bgm.mp3"],loop:!0,volume:1}),new Howl({src:["src/audio/sfx_woosh1.mp3"],loop:!1,volume:1}),new Howl({src:["src/audio/sfx_woosh2.mp3"],loop:!1,volume:1}),new Howl({src:["src/audio/sfx_woosh3.mp3"],loop:!1,volume:1}),new Howl({src:["src/audio/sfx_woosh4.mp3"],loop:!1,volume:1}),new Howl({src:["src/audio/sfx_woosh5.mp3"],loop:!1,volume:1}),new Howl({src:["src/audio/sfx_woosh6.mp3"],loop:!1,volume:1})],a.btn_sound.on("click",e),a.sndURL[0].once("play",()=>$(a.btn_sound).show())}function e(){var t=a.sound.hasClass("mute");t?(Howler.volume(1),a.sound.removeClass("mute")):(Howler.volume(0),a.sound.addClass("mute"))}return{init:t}}();i.init()})();