(function(){var o,s,t,e,a=(o=["src/bg.jpg","src/img_skater.png","src/spr_banner.png","src/spr_howtoplay.png","src/spr_btn.png","src/spr_audio.png","src/img_chevron.png","src/spr_skater.png","src/logo.png","src/spr_arw.png","src/spr_callout.png","src/img_targetbox.png","src/img_x.png","src/img_arrowburst.png","src/img_starburst.png","src/img_sparkle.png","src/btn_x.png"],s=["https://cdnjs.cloudflare.com/ajax/libs/gsap/3.11.5/gsap.min.js","https://cdnjs.cloudflare.com/ajax/libs/gsap/3.11.5/CustomEase.min.js"],t=0,e=o.length+s.length,{loadedAssets:t,totalAssets:e,creativeImages:o,creativeScripts:s}),r=function(){function o(){s(a.creativeImages),t(a.creativeScripts)}function s(o){for(var s=0;s<o.length;s++){var t=o[s];$("<img />").attr("src",t).on("load",e)}}function t(o){for(var s=0;s<o.length;s++){var t=o[s];$.getScript(t,e)}}function e(){a.loadedAssets+=1,a.loadedAssets==a.totalAssets&&l.init()}return{init:o}}(),n={},l=function(){function o(){n.currentVideo=0,n.videoStatus=[!1,!1,!1,!1],n.videoHolder=$("#videoHolder"),n.videoPlayer=$("#videoPlayer"),n.videoPlay=$("#videoPlay"),n.video=$("#video1"),n.btn_x=$("#btn_x"),n.videoReplay=!1,n.vidURL=["src/video.mp4"],n.cta=$("#cta"),n.logo=$("#logo"),n.btn_play=$("#btn_play"),n.btn_playagain=$("#btn_playagain"),n.btn_watchthespot=$("#btn_watchthespot"),n.btn_letsroll=$("#btn_letsroll"),n.banner=$("#banner"),n.spr_banner=$("#spr_banner"),n.img_skater=$("#img_skater"),n.img_chevron=$("#img_chevron"),n.txt_howtoplay=$("#txt_howtoplay"),n.zero=0,n.arw_pos=[0,"-102px","-204px","-306px"],n.arw_keys=[],n.pressed=[],n.txt_timer=document.getElementById("txt_timer"),n.txt_timer2=$("#txt_timer"),n.box=$(".box"),n.targetbox=$("#targetbox"),n._allbox=$("#_allbox"),n.allbox=$("#allbox"),n.skater=$(".skater"),n.callout=$("#callout"),n.arw_y=$(".arw_y"),n.arrowburst=$("#img_arrowburst"),n.starburst=$("#img_starburst"),n.img_sparkle=$(".img_sparkle"),n.ss=$(".skater.ss"),n.s0=$(".skater.s0"),n.s1=$(".skater.s1"),n.s2=$(".skater.s2"),n.s3=$(".skater.s3"),n.s4=$(".skater.s4"),n.bg2=$(".bg2"),n.img_x=$(".img_x"),n.bgPosX="background-position-x",n.bgPosY="background-position-y",n.ready=!1,n.end=!1,n.timeupdate=null,n.currentBox=0,n.timeleft=30,n.totalbox=69,n.score=0,n.spark=0,n.currentSpark=0,n.currentPos=350,n.combo=0,n.is_mobile="ontouchstart"in document.documentElement,n.audio=!1,n.touchstartPos={x:0,y:0},n.touchendPos={x:0,y:0},i.fn_STEP1()}return{init:o}}(),i=function(){function o(){var o=0;n.btn_play.on("click",e),n.btn_playagain.on("click",e),n.btn_watchthespot.on("click",e),n.btn_letsroll.on("click",e);var s=gsap.timeline({repeat:-1,yoyo:!0,repeatDelay:1});s.staggerTo(".flr",.3,{opacity:1,yoyo:!0},1);for(var t=0;t<70;t++)gsap.set($(".box"+t),{left:o}),o+=171;n.video.get(0).src=n.vidURL[0],n.video.get(0).volume=0,c.init()}function s(){l(),a(),f(),gsap.to([n.banner,n.img_chevron],.4,{z:.01,rotation:.01,top:-500,ease:"none"}),gsap.fromTo(n.img_skater,.2,{autoAlpha:1},{autoAlpha:0,ease:Power2.easeIn}),gsap.fromTo(n.ss,.5,{z:.001,rotation:.01,display:"block",left:960},{delay:.2,left:206,ease:"none"}),gsap.fromTo(n._allbox,.2,{autoAlpha:1},{autoAlpha:0,ease:"none"}),gsap.fromTo([n.box,n.targetbox,n.logo,n.txt_timer2,n.bg2],.3,{display:"block",autoAlpha:0},{delay:.3,autoAlpha:1,ease:"none",onComplete:i}),gsap.fromTo(n.txt_howtoplay,.5,{"background-position-y":"-63px",autoAlpha:0,bottom:124,right:-65},{delay:.1,autoAlpha:1}),p.SEEK(p.SND_BGM,0)}function t(){d(),n.btn_play.hide(),gsap.set([n.btn_playagain,n.btn_watchthespot,n.btn_letsroll],{display:"block"}),gsap.fromTo(n.banner,.5,{display:"block",top:-500},{top:0,ease:"power2.out"}),gsap.fromTo(n.img_skater,.5,{display:"block",autoAlpha:0},{autoAlpha:1,ease:"power2.out"})}function e(){switch(this.id){case"btn_play":n.btn_play.off("click"),s();break;case"btn_playagain":s();break;case"btn_watchthespot":n.videoHolder.show(),n.video.get(0).play();break;case"btn_letsroll":window.open("https://suntrust.com/","_blank")}}function a(){if(!n.end){var o=document.getElementById("allbox");o.offsetLeft<=560&&!n.ready&&(n.ready=!0),o.offsetLeft<=n.currentPos&&(n.currentBox+=1,n.currentPos-=171,n.skater.hide(),n.ss.show(),n.pressed[n.currentBox-1]||v()),12==n.spark&&f(),n.timeupdate=setTimeout(a,100)}}function r(){n.timeleft<=n.zero&&u(),n.end||(n.timeleft--,n.txt_timer.innerHTML=":"+n.timeleft,gsap.delayedCall(1,r))}function l(){n.timeleft=30,n.currentBox=0,n.currentPos=350,n.score=0,n.combo=0,n.arw_keys=[],n.pressed=[],n.ready=!1,n.end=!1,n.txt_timer.innerHTML=":30";var o=n.totalbox+1;gsap.set([n.skater,n.img_x],{autoAlpha:1,display:"none"}),gsap.set(n.allbox,{left:960});for(var s=0;s<o;s++){var t=Math.floor(4*Math.random());n.arw_keys.push(t),n.pressed.push(!1),gsap.set(".box"+s+" .spr_arw",{display:"block",backgroundPositionX:n.arw_pos[t],backgroundPositionY:0})}}function i(){gsap.fromTo(n.allbox,35,{z:.01,rotation:.01,left:960},{left:-9450,ease:CustomEase.create("custom","M0,0,C0.312,0.174,0.452,0.346,0.746,0.69,0.847,0.808,1.092,1.154,1,1")}),gsap.delayedCall(1,r),g()}function u(){function o(){gsap.fromTo([n.targetbox,n.logo,n.txt_timer2,n.skater,n.bg2,n.txt_howtoplay],.2,{autoAlpha:1},{autoAlpha:0,ease:"none",onComplete:function(){n.callout.css(n.bgPosY,"-1704px"),n.callout.show(),n.callout.addClass("animated bounceIn")}}),gsap.fromTo(n._allbox,.2,{autoAlpha:0},{autoAlpha:1,ease:"none"}),gsap.delayedCall(1,t)}gsap.killTweensOf(n.allbox),gsap.killTweensOf(n.img_sparkle),n.end=!0,gsap.fromTo(n.box,.2,{autoAlpha:1},{autoAlpha:0,ease:"none"}),gsap.to(n.img_sparkle,.2,{scale:0,ease:"none"}),n.callout.removeClass("animated bounceIn"),n.callout.hide(),gsap.delayedCall(.3,o),n.is_mobile?($("#btn_swipe").off("touchstart"),$(window).off("touchend"),$("#btn_swipe").hide()):$(window).off("keydown")}function d(){var o=n.score/n.currentBox*100;o>=100?n.spr_banner.css(n.bgPosX,"-999px"):o>=31&&o<=99?n.spr_banner.css(n.bgPosX,"-666px"):n.spr_banner.css(n.bgPosX,"-333px")}function g(){n.is_mobile?($("#btn_swipe").on("touchstart",b),$(window).on("touchend",b),$("#btn_swipe").show()):$(window).on("keydown",m)}function b(o){var s=o.originalEvent.touches[0]||o.originalEvent.changedTouches[0];switch(o.type){case"touchstart":o.preventDefault(),n.touchstartPos.x=s.pageX,n.touchstartPos.y=s.pageY;break;case"touchend":n.touchendPos.x=s.pageX,n.touchendPos.y=s.pageY,m()}}function m(o){var s=null;if(!n.pressed[n.currentBox]&&n.ready){if(n.is_mobile){var t=Math.abs(n.touchstartPos.x-n.touchendPos.x),e=Math.abs(n.touchstartPos.y-n.touchendPos.y);s=t>e?n.touchstartPos.x>n.touchendPos.x?37:39:n.touchstartPos.y>n.touchendPos.y?38:40}else s=o.keyCode?o.keyCode:o.which;switch(n.callout.removeClass("animated bounceIn"),n.starburst.removeClass("animated starBurst"),n.arrowburst.removeClass("animated arrowBurst"),s){case 38:n.is_mobile||o.preventDefault(),n.arw_keys[n.currentBox]==n.zero?("-3546px"==n.s1.css(n.bgPosY)?n.s1.css(n.bgPosY,"-3940px"):"-3940px"==n.s1.css(n.bgPosY)?n.s1.css(n.bgPosY,"-4334px"):n.s1.css(n.bgPosY,"-3546px"),n.arw_y.css(n.bgPosX,"0"),n.skater.hide(),gsap.fromTo(n.s1,.3,{z:.01,rotation:.01,display:"block",top:40},{top:0,ease:"power2.out"}),n.s1.show(),_()):y();break;case 39:n.is_mobile||o.preventDefault(),1==n.arw_keys[n.currentBox]?("-1182px"==n.s2.css(n.bgPosY)?n.s2.css(n.bgPosY,"-1576px"):"-1576px"==n.s2.css(n.bgPosY)?n.s2.css(n.bgPosY,"-1970px"):n.s2.css(n.bgPosY,"-1182px"),n.arw_y.css(n.bgPosX,"-102px"),n.skater.hide(),gsap.fromTo(n.s2,.3,{z:.01,rotation:.01,display:"block",left:206},{left:246,ease:"power2.out"}),_()):y();break;case 40:n.is_mobile||o.preventDefault(),2==n.arw_keys[n.currentBox]?("-4728px"==n.s3.css(n.bgPosY)?n.s3.css(n.bgPosY,"-5122px"):"-5122px"==n.s3.css(n.bgPosY)?n.s3.css(n.bgPosY,"-5516px"):n.s3.css(n.bgPosY,"-4728px"),n.arw_y.css(n.bgPosX,"-204px"),n.skater.hide(),gsap.fromTo(n.s3,.3,{z:.01,rotation:.01,display:"block",top:-40},{top:0,ease:"power2.out"}),_()):y();break;case 37:n.is_mobile||o.preventDefault(),3==n.arw_keys[n.currentBox]?("-2364px"==n.s4.css(n.bgPosY)?n.s4.css(n.bgPosY,"-2758px"):"-2758px"==n.s4.css(n.bgPosY)?n.s4.css(n.bgPosY,"-3152px"):n.s4.css(n.bgPosY,"-2364px"),n.arw_y.css(n.bgPosX,"-306px"),n.skater.hide(),gsap.fromTo(n.s4,.3,{z:.01,rotation:.01,display:"block",left:206},{left:166,ease:"power2.out"}),_()):y()}}}function _(){switch(n.score+=1,"0px"==n.callout.css(n.bgPosY)?n.callout.css(n.bgPosY,"-213px"):"-213px"==n.callout.css(n.bgPosY)?n.callout.css(n.bgPosY,"-426px"):"-426px"==n.callout.css(n.bgPosY)?n.callout.css(n.bgPosY,"-639px"):n.callout.css(n.bgPosY,"0px"),n.callout.show(),n.callout.addClass("animated bounceIn"),gsap.fromTo(n.arrowburst,.3,{z:.01,rotation:.01,display:"block",autoAlpha:1,scale:.3,bottom:-10},{scale:1,bottom:10,ease:"power3.out"}),gsap.fromTo(n.starburst,.3,{z:.01,rotation:.01,display:"block",autoAlpha:1,scale:.5},{scale:1.2,ease:"power3.out"}),gsap.to(n.arrowburst,.2,{delay:.1,autoAlpha:0,ease:"none"}),gsap.to(n.starburst,.2,{delay:.1,autoAlpha:0,ease:"none"}),gsap.fromTo(n.arw_y,.3,{z:.01,display:"block",scale:1,autoAlpha:1},{autoAlpha:0,scale:1.2,ease:"power1.in"}),n.pressed[n.currentBox]=!0,gsap.set(".box"+n.currentBox+" .spr_arw",{"background-position-y":"-102px"}),gsap.set(".box"+n.currentBox+" .spr_arw",{delay:.2,"background-position-y":"-204px"}),n.combo++,n.combo){case 1:p.PLAY(p.SND_GOOD1);break;case 2:p.PLAY(p.SND_GOOD2);break;case 3:p.PLAY(p.SND_GOOD3);break;case 4:p.PLAY(p.SND_GOOD4);break;default:p.PLAY(p.SND_GOOD5)}}function f(){if(n.spark=0,n.currentSpark==n.zero){n.currentSpark=1;var o=273,s=390,t=535,e=681,a=30,r=160}else if(1==n.currentSpark){n.currentSpark=2;o=296,s=390,t=535,e=663,a=0,r=90}else{n.currentSpark=0;o=256,s=390,t=535,e=702,a=80,r=100}for(var l=0;l<6;l++){var i=h(0,4);gsap.fromTo(".sp"+l,.4,{z:.01,display:"block",scale:0,autoAlpha:.1,left:x(o,s)-79,top:x(a,r)-79},{delay:i,scale:h(.5,1),autoAlpha:1,ease:"power2.inOut",yoyo:!0,repeat:1}),gsap.fromTo(".sp"+l,.8,{rotation:.01},{delay:i,rotation:x(-200,200),onComplete:function(){n.spark+=1}})}for(var c=0;c<6;c++){var p=h(0,4);gsap.fromTo(".ps"+c,.4,{z:.01,display:"block",scale:0,autoAlpha:.1,left:x(t,e)-79,top:x(a,r)-79},{delay:p,scale:h(.5,1),autoAlpha:1,ease:"power2.inOut",yoyo:!0,repeat:1}),gsap.fromTo(".ps"+c,.8,{rotation:.01},{delay:p,rotation:x(-200,200),onComplete:function(){n.spark+=1}})}}function x(o,s){return o=Math.ceil(o),s=Math.floor(s),Math.floor(Math.random()*(s-o))+o}function h(o,s){return Math.random()*(s-o)+o}function y(){n.skater.hide(),n.starburst.hide(),n.arrowburst.hide(),"-852px"==n.callout.css(n.bgPosY)?n.callout.css(n.bgPosY,"-1065px"):"-1065px"==n.callout.css(n.bgPosY)?n.callout.css(n.bgPosY,"-1278px"):"-1278px"==n.callout.css(n.bgPosY)?n.callout.css(n.bgPosY,"-1491px"):n.callout.css(n.bgPosY,"-852px"),n.callout.show(),n.callout.addClass("animated bounceIn"),n.pressed[n.currentBox]=!0,gsap.set($(".box"+n.currentBox+" .img_x"),{display:"block"}),"-394px"==n.s0.css(n.bgPosY)?n.s0.css(n.bgPosY,"-788px"):n.s0.css(n.bgPosY,"-394px"),n.s0.show(),n.combo=0,p.PLAY(p.SND_FAIL)}function v(){n.skater.hide(),n.starburst.hide(),n.arrowburst.hide(),n.callout.removeClass("animated bounceIn"),"-852px"==n.callout.css(n.bgPosY)?n.callout.css(n.bgPosY,"-1065px"):"-1065px"==n.callout.css(n.bgPosY)?n.callout.css(n.bgPosY,"-1278px"):"-1278px"==n.callout.css(n.bgPosY)?n.callout.css(n.bgPosY,"-1491px"):n.callout.css(n.bgPosY,"-852px"),n.callout.show(),n.callout.addClass("animated bounceIn"),n.pressed[n.currentBox-1]=!0,gsap.set($(".box"+(n.currentBox-1)+" .img_x"),{display:"block"}),"-394px"==n.s0.css(n.bgPosY)?n.s0.css(n.bgPosY,"-788px"):n.s0.css(n.bgPosY,"-394px"),n.s0.show(),n.combo=0,p.PLAY(p.SND_FAIL)}return{fn_STEP1:o,fn_STEP2:s}}(),c=function(){function o(){n.video.on("play",l),n.video.on("ended",c),n.video.on("timeupdate",i),n.video.on("playing",s),n.btn_x.on("click",t),n.video.attr("autoplay")&&(n.videoPlayer.show(),n.videoPlay.hide()),n.videoPlay.on("click",a)}function s(){n.video.off("playing"),n.video.get(0).removeAttribute("autoplay"),n.video.get(0).removeAttribute("muted"),n.video.get(0).muted=!1,n.video.get(0).volume=1}function t(){n.video.get(0).pause(),n.video.get(0).currentTime=0,n.videoHolder.hide(),n.bgm.get(0).play(),n.videoStatus=[!1,!1,!1,!1]}function e(){var o=n.videoPlayer.html();o=$(o).removeAttr("autoplay"),n.video.off("play",l),n.video.off("ended",c),n.video.off("timeupdate",i),n.videoPlayer.html("")}function a(){n.videoHolder.show(),n.videoPlay.hide(),n.video.get(0).play()}function r(){n.videoPlay.show(),n.video.get(0).pause()}function l(){$(".img_audio").hide(),p.PAUSE(p.SND_BGM),n.videoStatus[0]||(n.videoStatus[0]=!0)}function i(o){var s=o.currentTarget.currentTime/o.currentTarget.duration;!n.videoStatus[1]&&s>=.25?n.videoStatus[1]=!0:!n.videoStatus[2]&&s>=.5?n.videoStatus[2]=!0:!n.videoStatus[3]&&s>=.75&&(n.videoStatus[3]=!0)}function c(){$(".img_audio").show(),p.PLAY(p.SND_BGM),n.video.get(0).pause(),n.video.get(0).removeAttribute("autoplay"),n.video.get(0).removeAttribute("muted"),n.video.get(0).currentTime=0,n.videoHolder.hide(),n.videoStatus=[!1,!1,!1,!1],n.videoReplay=!0}return{init:o,destroy:e,playVideo:a,pauseVideo:r}}(),p={ASSETS:[["SND_BGM",{src:["src/audio/bgm.mp3"],loop:!0,volume:1}],["SND_FAIL",{src:["src/audio/sfx_fail.mp3"],loop:!1,volume:1}],["SND_GOOD1",{src:["src/audio/sfx_good1.mp3"],loop:!1,volume:1}],["SND_GOOD2",{src:["src/audio/sfx_good2.mp3"],loop:!1,volume:1}],["SND_GOOD3",{src:["src/audio/sfx_good3.mp3"],loop:!1,volume:1}],["SND_GOOD4",{src:["src/audio/sfx_good4.mp3"],loop:!1,volume:1}],["SND_GOOD5",{src:["src/audio/sfx_good5.mp3"],loop:!1,volume:1}]],ACTIVE_BUTTON:!0,INIT:function(o){if(img_audio=".img_audio",btn_audio="#btn_audio",$.getScript("https://cdnjs.cloudflare.com/ajax/libs/howler/2.2.3/howler.min.js",p.READY),p.ACTIVE_BUTTON){let o="<div id='btn_audio' class='button'><div class='img_audio center'></div></div>";$("#container").append(o),$(img_audio).css({width:"30px",height:"30px",background:"url(src/spr_audio.png) no-repeat",transform:"scale(0.92) translateZ(0) scaleZ(2)"}),$(btn_audio).css({right:"8px",top:"8px",width:"45px",height:"45px"})}$(btn_audio).on("click",p.MOUSECLICK),n.is_mobile||$(btn_audio).hover(p.MOUSEOVER,p.MOUSEOUT)},READY:function(o){for(let o=0;o<p.ASSETS.length;o++)p.ASSETS[o][1].preload=!0,p[p.ASSETS[o][0]]=new Howl(p.ASSETS[o][1]);p.PLAY(p.SND_BGM),r.init()},MOUSECLICK:function(o){p.ACTIVE?(p.ACTIVE=!1,p.VOLUME_OFF()):(p.ACTIVE=!0,p.VOLUME_ON())},MOUSEOVER:function(o){$(img_audio).css("transform","scale(1) translateZ(0) scaleZ(2)")},MOUSEOUT:function(o){$(img_audio).css("transform","scale(0.92) translateZ(0) scaleZ(2)")},PLAY:function(o){o.playing()?p.SEEK(o,0):o.play()},PAUSE:function(o){o.pause()},STOP:function(o){o.stop()},MUTE:function(o){o.volume(0)},UNMUTE:function(o){o.volume(1)},SEEK:function(o,s){o.seek(s)},VOLUME_ON:function(){Howler.volume(1),$(".img_audio").css("background-position-y","0px")},VOLUME_OFF:function(){Howler.volume(0),$(".img_audio").css("background-position-y","-40px")},END:function(o){Howler.unload()},ACTIVE:!0};p.INIT()})();