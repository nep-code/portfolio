(function(){var e,t,a,s,o=(e=["src/bg.png","src/spr_btn.png","src/txt_logo1.png","src/txt_copy1.png","src/txt_footer.png","src/btn_switchnow.png","src/pop_instruction.png","src/pop_result.png","src/txt_copy2.png","src/spr_cards.png","src/bg2.jpg","src/txt_copy3.png"],t=["https://cdnjs.cloudflare.com/ajax/libs/gsap/3.11.5/gsap.min.js"],a=0,s=e.length+t.length,{loadedAssets:a,totalAssets:s,creativeImages:e,creativeScripts:t}),n=function(){function e(){t(o.creativeImages),a(o.creativeScripts)}function t(e){for(var t=0;t<e.length;t++){var a=e[t];$("<img />").attr("src",a).on("load",s)}}function a(e){for(var t=0;t<e.length;t++){var a=e[t];$.getScript(a,s)}}function s(){o.loadedAssets+=1,o.loadedAssets==o.totalAssets&&c.init()}return{init:e}}(),r={},c=function(){function e(){r.flipout=$(".flipout"),r.txt_copy1=$("#txt_copy1"),r.zero=0,r.btn_startplaying=$("#btn_startplaying"),r.btn_switchtoday=$("#btn_switchtoday"),r.btn_playagain=$("#btn_playagain"),r.btn_switchnow=$("#btn_switchnow"),r.spr_cards=$(".spr_cards"),r.INTRO=$("#INTRO"),r.INSTRUCTION=$("#INSTRUCTION"),r.GAMEBOARD=$("#GAMEBOARD"),r.RESULT=$("#RESULT"),r.ENDFRAME=$("#ENDFRAME"),r.FOOTER=$("#FOOTER"),r.countdown_3sec=document.getElementById("countdown_3sec"),r.countdown_30sec=document.getElementById("countdown_30sec"),r.matches=document.getElementById("matches"),r.txt_result=document.getElementById("txt_result"),r.txt_result2=document.getElementById("txt_result2"),r.txt_result3=document.getElementById("txt_result3"),r.count=0,r.score=0,r.set=6,r.initElapse=null,r.checkResult=null,r.card=0,r.selectedcard=[],r.currentcard=[],r.cardsY=["-150px","-300px","-450px","-600px","-750px","-900px","-1050px"],r.cards=[],r.ready=!0,r.btn_sound=$("#sound"),r.audio_bg=$("#audio_bg"),r.sfx_countdown=$("#sfx_countdown"),r.sfx_flip=$("#sfx_flip"),r.sfx_match=$("#sfx_match"),r.sfx_reset=$("#sfx_reset"),r.sfx_gameover=$("#sfx_gameover"),r._audio_bg=$("#_audio_bg"),r._sfx_countdown=$("#_sfx_countdown"),r._sfx_flip=$("#_sfx_flip"),r._sfx_match=$("#_sfx_match"),r._sfx_reset=$("#_sfx_reset"),r._sfx_gameover=$("#_sfx_gameover"),r._sfx_countdown.get(0).src="src/audio/sfx_countdown.mp3",r._sfx_match.get(0).src="src/audio/sfx_match.mp3",r._sfx_flip.get(0).src="src/audio/sfx_flip.mp3",r._sfx_reset.get(0).src="src/audio/sfx_reset.mp3",r._sfx_gameover.get(0).src="src/audio/sfx_gameover.mp3",r.audio_bg.get(0).load(),r.sfx_countdown.get(0).load(),r.sfx_flip.get(0).load(),r.sfx_match.get(0).load(),r.sfx_reset.get(0).load(),r.sfx_gameover.get(0).load(),r.autoplay=null,r.isautoplay=!0,r.autoflip=[0,1,2,3,4,5,6,7,8,9,10,11],r.flip=0,r.ap_card=null,d.fn_STEP1()}return{init:e}}(),d=function(){function e(){r.btn_startplaying.on("click",p),r.btn_switchtoday.on("click",p),r.btn_switchnow.on("click",p),r.btn_sound.on("click",T),r.spr_cards.on("click",i),r.spr_cards.mouseover("over",x),r.spr_cards.mouseout("over",y),r.btn_startplaying.mouseover("over",function(){gsap.fromTo(r.btn_startplaying,.1,{scale:1},{scale:1.05})}),r.btn_startplaying.mouseout("out",function(){gsap.fromTo(r.btn_startplaying,.1,{scale:1.05},{scale:1})}),gsap.from(r.flipout,.5,{top:960}),gsap.from(r.txt_copy1,.5,{delay:.2,top:960}),gsap.from(r.btn_startplaying,.5,{delay:.4,top:960}),gsap.fromTo(r.btn_startplaying,.2,{delay:1,scale:1},{delay:1,scale:1.2}),gsap.to(r.btn_startplaying,.2,{delay:1.1,scale:1,onComplete:function(){r.btn_playagain.on("click",p)}}),r.sfx_flip.get(0).volume=.3,r.sfx_match.get(0).volume=.3,r.sfx_reset.get(0).volume=.3,r.sfx_gameover.get(0).volume=.3}function t(){l(),r.ENDFRAME.hide(),r.count=30,r.score=0,r.set=6,r.card=0,r.selectedcard=[],r.currentcard=[],r.ready=!0,r.countdown_30sec.innerHTML=r.count,r.matches.innerHTML=r.score,gsap.set(r.spr_cards,{"background-position-y":0}),gsap.delayedCall(1,h),r.initElapse=setTimeout(s,5e3)}function a(){r.isautoplay=!1,clearTimeout(r.autoplay),gsap.fromTo(r.ENDFRAME,.2,{display:"block",autoAlpha:0},{autoAlpha:1,onComplete:function(){gsap.set(r.spr_cards,{rotationY:0}),r.RESULT.hide()}}),gsap.to(r.audio_bg,.5,{volume:1})}function s(e){r.ap_card="card_"+r.autoflip[r.flip],gsap.set($("#"+r.ap_card),{"pointer-events":"none"}),gsap.to($("#"+r.ap_card),.2,{z:.01,force3D:!1,perspective:1e3,rotationY:90,ease:"none",onComplete:o})}function o(e){var t=null;switch(r.ap_card){case"card_0":t=r.cards[0];break;case"card_1":t=r.cards[1];break;case"card_2":t=r.cards[2];break;case"card_3":t=r.cards[3];break;case"card_4":t=r.cards[4];break;case"card_5":t=r.cards[5];break;case"card_6":t=r.cards[6];break;case"card_7":t=r.cards[7];break;case"card_8":t=r.cards[8];break;case"card_9":t=r.cards[9];break;case"card_10":t=r.cards[10];break;case"card_11":t=r.cards[11]}gsap.set($("#"+r.ap_card),{"background-position-y":t}),gsap.to($("#"+r.ap_card),.2,{z:.01,force3D:!1,perspective:1e3,rotationY:0,ease:"none",onComplete:function(){setTimeout(n,500)}})}function n(e){function t(){gsap.set($("#"+r.ap_card),{"pointer-events":"auto","background-position-y":0}),gsap.to($("#"+r.ap_card),.2,{z:.01,force3D:!1,perspective:1e3,rotationY:0,ease:"none",onComplete:function(){r.isautoplay&&(r.flip>=11?r.flip=0:r.flip++,r.flip<2&&(r.autoplay=setTimeout(s,1e3)))}})}gsap.to($("#"+r.ap_card),.2,{z:.01,force3D:!1,perspective:1e3,rotationY:90,ease:"none",onComplete:t})}function c(){gsap.killTweensOf("*"),gsap.set(r.spr_cards,{"pointer-events":"none",scale:.91}),r.matches.innerHTML<=3?(r.txt_result.innerHTML=" ",r.txt_result2.innerHTML="Nice try! Give it another shot and ",r.txt_result3.innerHTML="see if you can do better!"):r.matches.innerHTML>=7?(r.txt_result.innerHTML=" ",r.txt_result2.innerHTML="Unreal! Your matching skills",r.txt_result3.innerHTML="are rock star level!"):(r.txt_result.innerHTML=" ",r.txt_result2.innerHTML="Well done! Youâ€™re on your way",r.txt_result3.innerHTML="to becoming a match-master!"),gsap.fromTo(r.RESULT,.2,{autoAlpha:0,display:"block"},{autoAlpha:1}),gsap.delayedCall(5,a),r.sfx_gameover.get(0).currentTime=0,r.sfx_gameover.get(0).play()}function p(){switch(this.id){case"btn_startplaying":r.isautoplay=!0,clearTimeout(r.autoplay),r.btn_startplaying.off("click"),r.count=3,r.countdown_3sec.innerHTML=r.count,gsap.to("#btn_startplaying",.5,{autoAlpha:0}),gsap.fromTo([r.INSTRUCTION,r.GAMEBOARD,r.FOOTER],.2,{display:"block",autoAlpha:0,y:0},{autoAlpha:1,onComplete:function(){r.INTRO.hide(),gsap.delayedCall(1,d.cd_3sec),r.sfx_countdown.get(0).currentTime=0,r.sfx_countdown.get(0).play()}}),r.audio_bg.get(0).play(),r.btn_sound.show();break;case"btn_switchtoday":r.isautoplay=!1,window.open("https://www.t-mobile.com/","_blank"),r.btn_sound.hasClass("mute")||T();break;case"btn_playagain":gsap.set(r.spr_cards,{"pointer-events":"auto"}),t();break;case"btn_switchnow":r.isautoplay=!1,clearTimeout(r.autoplay),window.open("https://www.t-mobile.com/","_blank"),r.btn_sound.hasClass("mute")||T()}}function i(e){r.ready&&(r.isautoplay=!1,clearTimeout(r.autoplay),clearTimeout(r.initElapse),r.ready=!1,r.currentcard[r.card]=e.currentTarget,gsap.set(e.currentTarget,{"pointer-events":"none"}),gsap.to(e.currentTarget,.2,{z:.01,force3D:!1,perspective:1e3,rotationY:90,ease:"none",onComplete:u}),r.sfx_flip.get(0).currentTime=.02,r.sfx_flip.get(0).play())}function u(e){var t=null,a=r.currentcard[r.card];switch(a.id){case"card_0":t=r.cards[0];break;case"card_1":t=r.cards[1];break;case"card_2":t=r.cards[2];break;case"card_3":t=r.cards[3];break;case"card_4":t=r.cards[4];break;case"card_5":t=r.cards[5];break;case"card_6":t=r.cards[6];break;case"card_7":t=r.cards[7];break;case"card_8":t=r.cards[8];break;case"card_9":t=r.cards[9];break;case"card_10":t=r.cards[10];break;case"card_11":t=r.cards[11]}r.selectedcard.push(t),gsap.set(a,{"background-position-y":t}),gsap.to(a,.2,{z:.01,force3D:!1,perspective:1e3,rotationY:0,ease:"none",onComplete:_})}function l(){v(r.cardsY),r.cards=[];for(var e=0;e<6;e++)r.cards.push(r.cardsY[e]),r.cards.push(r.cardsY[e]);v(r.cards)}function _(){r.card==r.zero?(r.card=1,r.ready=!0):r.selectedcard[0]==r.selectedcard[1]?(r.score++,r.matches.innerHTML=r.score,gsap.set([r.currentcard[0],r.currentcard[1]],{"pointer-events":"none"}),r.sfx_match.get(0).currentTime=.04,r.sfx_match.get(0).play(),f()):gsap.delayedCall(.7,g)}function g(){function e(){gsap.set([t,a],{"pointer-events":"auto",scale:.91,"background-position-y":0}),gsap.to([t,a],.2,{z:.01,force3D:!1,perspective:1e3,rotationY:0,ease:"none"})}var t=r.currentcard[0],a=r.currentcard[1];f(),gsap.to([t,a],.2,{z:.01,force3D:!1,perspective:1e3,rotationY:90,ease:"none",onComplete:e})}function f(){r.score==r.set?(m(),r.set+=6):(r.card=0,r.selectedcard=[],r.currentcard=[],r.ready=!0)}function m(){function e(){gsap.set(r.spr_cards,{"background-position-y":0}),gsap.to(r.spr_cards,.2,{rotationY:0,ease:"none",onComplete:function(){gsap.set(r.spr_cards,{"pointer-events":"auto"}),r.card=0,r.selectedcard=[],r.currentcard=[],r.ready=!0}})}l(),gsap.to(r.spr_cards,.2,{rotationY:90,ease:"none",onComplete:e}),r.sfx_reset.get(0).currentTime=0,r.sfx_reset.get(0).play()}function x(e){gsap.set(this,{z:.01,force3D:!1,perspective:1e3,scale:.96})}function y(e){gsap.set(this,{z:.01,force3D:!1,perspective:1e3,scale:.91})}function b(){function e(){gsap.fromTo(r.INSTRUCTION,.2,{autoAlpha:1},{autoAlpha:0,onComplete:t})}r.count<=1?(gsap.set(r.countdown_3sec,{left:"564px",top:"176px","font-size":"710%"}),r.countdown_3sec.innerHTML="GO!",gsap.delayedCall(1,e)):(r.count--,r.countdown_3sec.innerHTML=r.count,gsap.delayedCall(1,b))}function h(){r.count<=r.zero?(c(),r.isautoplay=!1,clearTimeout(r.autoplay)):r.count<=18&&r.isautoplay?c():(r.count--,r.count<=9?r.countdown_30sec.innerHTML="0"+r.count:r.countdown_30sec.innerHTML=r.count,gsap.delayedCall(1,h))}function T(){var e=r.btn_sound.hasClass("mute");r.isautoplay=!1,e?(r.btn_sound.removeClass("mute"),r.audio_bg.get(0).muted=!1,r.sfx_countdown.get(0).muted=!1,r.sfx_flip.get(0).muted=!1,r.sfx_match.get(0).muted=!1,r.sfx_reset.get(0).muted=!1,r.sfx_gameover.get(0).muted=!1):(r.btn_sound.addClass("mute"),r.audio_bg.get(0).muted=!0,r.sfx_countdown.get(0).muted=!0,r.sfx_flip.get(0).muted=!0,r.sfx_match.get(0).muted=!0,r.sfx_reset.get(0).muted=!0,r.sfx_gameover.get(0).muted=!0)}function v(e){for(var t,a,s=e.length;0!==s;)a=Math.floor(Math.random()*s),s-=1,t=e[s],e[s]=e[a],e[a]=t;return e}return{fn_STEP1:e,cd_3sec:b}}();n.init()})();
