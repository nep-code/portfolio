(function(){var e,t,a,s,o,r,n=(e=["src/bg.png","src/spr_btn.png","src/txt_logo1.png","src/txt_copy1.png"],t=["src/txt_footer.png","src/btn_switchnow.png","src/pop_instruction.png","src/pop_result.png","src/txt_copy2.png","src/spr_cards.png","src/bg2.jpg","src/txt_copy3.png"],a=["https://cdnjs.cloudflare.com/ajax/libs/gsap/3.11.5/gsap.min.js"],s=0,o=0,r=e.length+a.length,{loadedAssets:s,totalAssets:r,creativeImages:e,creativeScripts:a,otherImages:t,otherAssets:o}),c=function(){function e(){t(n.creativeImages),s(n.creativeScripts)}function t(e){for(var t=0;t<e.length;t++){var a=e[t];$("<img />").attr("src",a).on("load",o)}}function a(e){for(var t=0;t<e.length;t++){var a=e[t];$("<img />").attr("src",a).on("load",r)}}function s(e){for(var t=0;t<e.length;t++){var a=e[t];$.getScript(a,o)}}function o(){n.loadedAssets+=1,n.loadedAssets==n.totalAssets&&i.init()}function r(){n.otherAssets+=1,n.otherAssets==n.otherImages.length&&gsap.fromTo([d.INSTRUCTION,d.GAMEBOARD,d.FOOTER],.2,{display:"block",autoAlpha:0},{autoAlpha:1,onComplete:function(){d.INTRO.hide(),gsap.delayedCall(1,p.cd_3sec),d.sfx_countdown.get(0).play()}})}return{init:e,loadotherImages:a}}(),d={},i=function(){function e(){d.flipout=$(".flipout"),d.txt_copy1=$("#txt_copy1"),d.zero=0,d.btn_startplaying=$("#btn_startplaying"),d.btn_switchtoday=$("#btn_switchtoday"),d.btn_playagain=$("#btn_playagain"),d.btn_switchnow=$("#btn_switchnow"),d.spr_cards=$(".spr_cards"),d.INTRO=$("#INTRO"),d.INSTRUCTION=$("#INSTRUCTION"),d.GAMEBOARD=$("#GAMEBOARD"),d.RESULT=$("#RESULT"),d.ENDFRAME=$("#ENDFRAME"),d.FOOTER=$("#FOOTER"),d.countdown_3sec=document.getElementById("countdown_3sec"),d.countdown_30sec=document.getElementById("countdown_30sec"),d.matches=document.getElementById("matches"),d.txt_result=document.getElementById("txt_result"),d.txt_result2=document.getElementById("txt_result2"),d.txt_result3=document.getElementById("txt_result3"),d.count=0,d.score=0,d.set=6,d.initElapse=null,d.checkResult=null,d.card=0,d.selectedcard=[],d.currentcard=[],d.cardsY=["-150px","-300px","-450px","-600px","-750px","-900px","-1050px"],d.cards=[],d.ready=!0,d.btn_sound=$("#sound"),d.audio_bg=$("#audio_bg"),d.sfx_countdown=$("#sfx_countdown"),d.sfx_flip=$("#sfx_flip"),d.sfx_match=$("#sfx_match"),d.sfx_reset=$("#sfx_reset"),d.sfx_gameover=$("#sfx_gameover"),d._audio_bg=$("#_audio_bg"),d._sfx_countdown=$("#_sfx_countdown"),d._sfx_flip=$("#_sfx_flip"),d._sfx_match=$("#_sfx_match"),d._sfx_reset=$("#_sfx_reset"),d._sfx_gameover=$("#_sfx_gameover"),d._sfx_countdown.get(0).src="src/audio/sfx_countdown.mp3",d._sfx_match.get(0).src="src/audio/sfx_match.mp3",d._sfx_flip.get(0).src="src/audio/sfx_flip.mp3",d._sfx_reset.get(0).src="src/audio/sfx_reset.mp3",d._sfx_gameover.get(0).src="src/audio/sfx_gameover.mp3",d.audio_bg.get(0).load(),d.sfx_countdown.get(0).load(),d.sfx_flip.get(0).load(),d.sfx_match.get(0).load(),d.sfx_reset.get(0).load(),d.sfx_gameover.get(0).load(),d.autoplay=null,d.isautoplay=!0,d.autoflip=[0,1,2,3,4,5,6,7,8,9,10,11],d.flip=0,d.ap_card=null,p.fn_STEP1()}return{init:e}}(),p=function(){function e(){d.btn_startplaying.on("click",p),d.btn_switchtoday.on("click",p),d.btn_switchnow.on("click",p),d.btn_sound.on("click",v),d.spr_cards.on("click",u),d.spr_cards.mouseover("over",y),d.spr_cards.mouseout("over",b),d.btn_startplaying.mouseover("over",function(){gsap.fromTo(d.btn_startplaying,.1,{scale:1},{scale:1.05})}),d.btn_startplaying.mouseout("out",function(){gsap.fromTo(d.btn_startplaying,.1,{scale:1.05},{scale:1})}),gsap.from(d.flipout,.5,{top:960}),gsap.from(d.txt_copy1,.5,{delay:.2,top:960}),gsap.from(d.btn_startplaying,.5,{delay:.4,top:960}),gsap.fromTo(d.btn_startplaying,.2,{delay:1,scale:1},{delay:1,scale:1.2}),gsap.to(d.btn_startplaying,.2,{delay:1.1,scale:1,onComplete:function(){d.btn_playagain.on("click",p)}}),d.sfx_flip.get(0).volume=.3,d.sfx_match.get(0).volume=.3,d.sfx_reset.get(0).volume=.3,d.sfx_gameover.get(0).volume=.3}function t(){_(),d.ENDFRAME.hide(),d.count=30,d.score=0,d.set=6,d.card=0,d.selectedcard=[],d.currentcard=[],d.ready=!0,d.countdown_30sec.innerHTML=d.count,d.matches.innerHTML=d.score,gsap.set(d.spr_cards,{"background-position-y":0}),gsap.delayedCall(1,T),gsap.to(d.audio_bg,.5,{volume:.3}),d.initElapse=setTimeout(s,5e3)}function a(){d.isautoplay=!1,clearTimeout(d.autoplay),gsap.fromTo(d.ENDFRAME,.2,{display:"block",autoAlpha:0},{autoAlpha:1,onComplete:function(){gsap.set(d.spr_cards,{rotationY:0}),d.RESULT.hide()}}),gsap.to(d.audio_bg,.5,{volume:1})}function s(e){d.ap_card="card_"+d.autoflip[d.flip],gsap.set($("#"+d.ap_card),{"pointer-events":"none"}),gsap.to($("#"+d.ap_card),.2,{z:.01,force3D:!1,perspective:1e3,rotationY:90,ease:"none",onComplete:o})}function o(e){var t=null;switch(d.ap_card){case"card_0":t=d.cards[0];break;case"card_1":t=d.cards[1];break;case"card_2":t=d.cards[2];break;case"card_3":t=d.cards[3];break;case"card_4":t=d.cards[4];break;case"card_5":t=d.cards[5];break;case"card_6":t=d.cards[6];break;case"card_7":t=d.cards[7];break;case"card_8":t=d.cards[8];break;case"card_9":t=d.cards[9];break;case"card_10":t=d.cards[10];break;case"card_11":t=d.cards[11]}gsap.set($("#"+d.ap_card),{"background-position-y":t}),gsap.to($("#"+d.ap_card),.2,{z:.01,force3D:!1,perspective:1e3,rotationY:0,ease:"none",onComplete:function(){setTimeout(r,500)}})}function r(e){function t(){gsap.set($("#"+d.ap_card),{"pointer-events":"auto","background-position-y":0}),gsap.to($("#"+d.ap_card),.2,{z:.01,force3D:!1,perspective:1e3,rotationY:0,ease:"none",onComplete:function(){d.isautoplay&&(d.flip>=11?d.flip=0:d.flip++,d.flip<2&&(d.autoplay=setTimeout(s,1e3)))}})}gsap.to($("#"+d.ap_card),.2,{z:.01,force3D:!1,perspective:1e3,rotationY:90,ease:"none",onComplete:t})}function i(){gsap.killTweensOf("*"),gsap.set(d.spr_cards,{"pointer-events":"none",scale:.91}),d.matches.innerHTML<=3?(d.txt_result.innerHTML=" ",d.txt_result2.innerHTML="Nice try! Give it another shot and ",d.txt_result3.innerHTML="see if you can do better!"):d.matches.innerHTML>=7?(d.txt_result.innerHTML=" ",d.txt_result2.innerHTML="Unreal! Your matching skills",d.txt_result3.innerHTML="are rock star level!"):(d.txt_result.innerHTML=" ",d.txt_result2.innerHTML="Well done! Youâ€™re on your way",d.txt_result3.innerHTML="to becoming a match-master!"),gsap.fromTo(d.RESULT,.2,{autoAlpha:0,display:"block"},{autoAlpha:1}),gsap.delayedCall(5,a),d.sfx_gameover.get(0).currentTime=0,d.sfx_gameover.get(0).play()}function p(){switch(this.id){case"btn_startplaying":d.isautoplay=!0,clearTimeout(d.autoplay),d.btn_startplaying.off("click"),d.count=3,d.countdown_3sec.innerHTML=d.count,c.loadotherImages(n.otherImages),gsap.to("#btn_startplaying",.5,{autoAlpha:0});break;case"btn_switchtoday":d.isautoplay=!1,window.open("https://www.t-mobile.com/","_blank"),d.btn_sound.hasClass("mute")||v();break;case"btn_playagain":gsap.set(d.spr_cards,{"pointer-events":"auto"}),t();break;case"btn_switchnow":d.isautoplay=!1,clearTimeout(d.autoplay),window.open("https://www.t-mobile.com/","_blank"),d.btn_sound.hasClass("mute")||v()}}function u(e){d.ready&&(d.isautoplay=!1,clearTimeout(d.autoplay),clearTimeout(d.initElapse),d.ready=!1,d.currentcard[d.card]=e.currentTarget,gsap.set(e.currentTarget,{"pointer-events":"none"}),gsap.to(e.currentTarget,.2,{z:.01,force3D:!1,perspective:1e3,rotationY:90,ease:"none",onComplete:l}),d.sfx_flip.get(0).currentTime=.02,d.sfx_flip.get(0).play())}function l(e){var t=null,a=d.currentcard[d.card];switch(a.id){case"card_0":t=d.cards[0];break;case"card_1":t=d.cards[1];break;case"card_2":t=d.cards[2];break;case"card_3":t=d.cards[3];break;case"card_4":t=d.cards[4];break;case"card_5":t=d.cards[5];break;case"card_6":t=d.cards[6];break;case"card_7":t=d.cards[7];break;case"card_8":t=d.cards[8];break;case"card_9":t=d.cards[9];break;case"card_10":t=d.cards[10];break;case"card_11":t=d.cards[11]}d.selectedcard.push(t),gsap.set(a,{"background-position-y":t}),gsap.to(a,.2,{z:.01,force3D:!1,perspective:1e3,rotationY:0,ease:"none",onComplete:g})}function _(){w(d.cardsY),d.cards=[];for(var e=0;e<6;e++)d.cards.push(d.cardsY[e]),d.cards.push(d.cardsY[e]);w(d.cards)}function g(){d.card==d.zero?(d.card=1,d.ready=!0):d.selectedcard[0]==d.selectedcard[1]?(d.score++,d.matches.innerHTML=d.score,gsap.set([d.currentcard[0],d.currentcard[1]],{"pointer-events":"none"}),d.sfx_match.get(0).currentTime=.04,d.sfx_match.get(0).play(),m()):gsap.delayedCall(.7,f)}function f(){function e(){gsap.set([t,a],{"pointer-events":"auto",scale:.91,"background-position-y":0}),gsap.to([t,a],.2,{z:.01,force3D:!1,perspective:1e3,rotationY:0,ease:"none"})}var t=d.currentcard[0],a=d.currentcard[1];m(),gsap.to([t,a],.2,{z:.01,force3D:!1,perspective:1e3,rotationY:90,ease:"none",onComplete:e})}function m(){d.score==d.set?(x(),d.set+=6):(d.card=0,d.selectedcard=[],d.currentcard=[],d.ready=!0)}function x(){function e(){gsap.set(d.spr_cards,{"background-position-y":0}),gsap.to(d.spr_cards,.2,{rotationY:0,ease:"none",onComplete:function(){gsap.set(d.spr_cards,{"pointer-events":"auto"}),d.card=0,d.selectedcard=[],d.currentcard=[],d.ready=!0}})}_(),gsap.to(d.spr_cards,.2,{rotationY:90,ease:"none",onComplete:e}),d.sfx_reset.get(0).currentTime=0,d.sfx_reset.get(0).play()}function y(e){gsap.set(this,{z:.01,force3D:!1,perspective:1e3,scale:.96})}function b(e){gsap.set(this,{z:.01,force3D:!1,perspective:1e3,scale:.91})}function h(){function e(){gsap.fromTo(d.INSTRUCTION,.2,{autoAlpha:1},{autoAlpha:0,onComplete:t})}d.count<=1?(gsap.set(d.countdown_3sec,{left:"564px",top:"176px","font-size":"710%"}),d.countdown_3sec.innerHTML="GO!",gsap.delayedCall(1,e)):(d.count--,d.countdown_3sec.innerHTML=d.count,gsap.delayedCall(1,h))}function T(){d.count<=d.zero?(i(),d.isautoplay=!1,clearTimeout(d.autoplay)):d.count<=18&&d.isautoplay?i():(d.count--,d.count<=9?d.countdown_30sec.innerHTML="0"+d.count:d.countdown_30sec.innerHTML=d.count,gsap.delayedCall(1,T))}function v(){var e=d.btn_sound.hasClass("mute");d.isautoplay=!1,e?(d.btn_sound.removeClass("mute"),d.audio_bg.get(0).muted=!1,d.sfx_countdown.get(0).muted=!1,d.sfx_flip.get(0).muted=!1,d.sfx_match.get(0).muted=!1,d.sfx_reset.get(0).muted=!1,d.sfx_gameover.get(0).muted=!1):(d.btn_sound.addClass("mute"),d.audio_bg.get(0).muted=!0,d.sfx_countdown.get(0).muted=!0,d.sfx_flip.get(0).muted=!0,d.sfx_match.get(0).muted=!0,d.sfx_reset.get(0).muted=!0,d.sfx_gameover.get(0).muted=!0)}function w(e){for(var t,a,s=e.length;0!==s;)a=Math.floor(Math.random()*s),s-=1,t=e[s],e[s]=e[a],e[a]=t;return e}return{fn_STEP1:e,cd_3sec:h}}();c.init()})();