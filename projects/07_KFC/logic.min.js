(function(){var e,t,o,n,s,i,a,d,r,l,c,u,p,m,f,v,h,g,_,b,w,y,k,C,T,x,S,I,E=(e=["src/logo.png","src/scoreboard.png","src/cta.png","src/btn_play.png","src/btn_replay.png","src/colonel.png","src/ball.png","src/bg_instruction.png","src/field.png","src/crowd.png","src/sprite.png","src/touchdown.png","src/confetti.png","src/bigbucket.png"],t=["https://cdnjs.cloudflare.com/ajax/libs/gsap/3.11.5/gsap.min.js","https://cdnjs.cloudflare.com/ajax/libs/gsap/3.11.5/Draggable.min.js"],o=0,n=e.length+t.length,s=1,i="ontouchstart"in document.documentElement,{loadedAssets:o,totalAssets:n,init_Images:e,init_JS:t,is_mobile:i,stageScale:s}),P=function(){function e(){t(E.init_Images),o(E.init_JS)}function t(e){for(let o=0;o<e.length;o++){var t=e[o];$("<img />").attr("src",t).on("load",n)}}function o(e){for(let o=0;o<e.length;o++){var t=e[o];$.getScript(t,n)}}function n(){E.loadedAssets+=1,E.loadedAssets==E.totalAssets&&L.init()}return{init:e}}(),R={},L=function(){function e(){R.currentVideo=0,R.videoStatus=[!1,!1,!1,!1],R.replay=!1,R.videoHolder=$("#videoHolder"),R.videoPlayer=$("#videoPlayer"),R.video=$("#video1"),R.vidInit=!0,R.vidURL=["src/video/badcall.mp4","src/video/slap.mp4","src/video/icebath.mp4"],R.btn_videosound=$("#btn_videosound"),R.btn_videoplay=$("#btn_videoplay"),R.txt_usearrowkeys=$("#txt_usearrowkeys"),R.txt_tomove=$("#txt_tomove"),R.colonel=$("#colonel"),R.ball=$("#ball"),R.txt_headline=$("#txt_headline"),R.txt_title=$("#txt_title"),R.instruction=$("#instruction"),R.btn_play=$("#btn_play"),R.STEP_1=$("#STEP_1"),R.STEP_3=$("#STEP_3"),R.confetti1=$("#confetti1"),R.confetti2=$("#confetti2"),R.btn_playagain=$("#btn_playagain"),R.field=$("#field"),R.crowd=$("#crowd"),R.player=$("#player"),R.character=$("#character"),R.stars=$("#stars"),R.plus=$("#plus"),R.touchdown=$("#touchdown"),R.items=$(".items"),R.itemInterval=null,R.endInterval=null,R.currentItem=4,R.currentPlayer=263,R.currentItems=[],R.options=[0,1,2,3,4,5],R.ready=!0,R.itemSpeed=1.961,R.button=$(".button"),R.timer=null,R.userInit=!1,R.zero=0,A.fn_STEP1()}return{init:e}}(),A=function(){function e(){var e=Math.random();e<1/3?(R.videoHolder.addClass("IceBath"),R.currentVideo=2):e<2/3?(R.videoHolder.addClass("Slap"),R.currentVideo=1):R.currentVideo=0,R.button.on("click",n),j.INIT(),U.INIT(),z.init(),O.init(),s()}function t(){gsap.set("#game_container",{top:0}),j.START()}function o(){function e(){R.confetti2.addClass("animate"),gsap.fromTo(R.confetti1,1,{top:0},{top:680}),gsap.fromTo(R.confetti2,2,{top:-680},{top:680,onComplete:function(){R.confetti1.removeClass("animate"),R.confetti2.removeClass("animate"),R.crowd.removeClass("animate"),R.character.removeClass("dance")}})}gsap.set(R.STEP_3,{zIndex:3}),R.STEP_3.show(),R.confetti1.show(),R.confetti1.addClass("animate"),gsap.fromTo(R.confetti1,.8,{top:-680},{top:0,ease:"none",onComplete:function(){gsap.delayedCall(15,e)}})}function n(){switch(this.id){case"btn_videoplay":R.userInit=!0,R.video.get(0).muted=!1,R.video.get(0).volume=1,R.video.get(0).removeAttribute("muted"),z.playVideo();break;case"btn_videosound":R.btn_videosound.hide(),R.userInit=!0,R.video.get(0).muted=!1,R.video.get(0).volume=1,R.video.get(0).removeAttribute("muted");break;case"btn_play":R.sndURL[0].play(),R.STEP_1.hide(),t();break;case"btn_playagain":R.sndURL[4].play(),R.STEP_3.hide(),j.RESET(),t();break;case"LOGOPANEL":window.open("https://www.kfc.com/","_blank");break;case"btn_cta":window.open("https://www.kfc.com/store-locator/","_blank");break;case"btn_fb":window.open("https://www.facebook.com/KFC/","_blank");break;case"btn_tw":window.open("https://twitter.com/kfc/","_blank");break;case"btn_in":window.open("https://www.instagram.com/kfc/","_blank")}}function s(){function e(){gsap.delayedCall(1,i)}gsap.fromTo(R.ball,1,{left:660,rotation:20},{left:-124,rotation:-20,ease:"none"}),gsap.fromTo(R.ball,.5,{top:160},{top:40,ease:Power1.easeOut,onComplete:function(){gsap.fromTo(R.ball,.5,{top:40},{top:160,ease:Power1.easeIn,onComplete:e})}})}function i(){function e(){R.colonel.removeClass("speak"),gsap.delayedCall(2,function(){R.colonel.addClass("speak"),gsap.delayedCall(.5,function(){R.colonel.removeClass("speak")})})}function t(){var t=new TimelineLite({onComplete:e});t.set(R.txt_usearrowkeys,{width:18}).set(R.txt_usearrowkeys,{width:36},1).set(R.txt_usearrowkeys,{width:54},2).set(R.txt_usearrowkeys,{width:67},3).set(R.txt_usearrowkeys,{width:86},4).set(R.txt_usearrowkeys,{width:105},5).set(R.txt_usearrowkeys,{width:123},6).set(R.txt_usearrowkeys,{width:142},7).set(R.txt_usearrowkeys,{width:170},8).set(R.txt_usearrowkeys,{width:182},9).set(R.txt_usearrowkeys,{width:201},10).set(R.txt_usearrowkeys,{width:220},11).set(R.txt_usearrowkeys,{width:239},12).set(R.txt_usearrowkeys,{width:270},13).set(R.txt_tomove,{width:18},14).set(R.txt_tomove,{width:37},15).set(R.txt_tomove,{width:48},16).set(R.txt_tomove,{width:76},17).set(R.txt_tomove,{width:95},18).set(R.txt_tomove,{width:114},19).set(R.txt_tomove,{width:270},20),R.colonel.addClass("speak"),t.duration(.7).play()}R.txt_headline.hide(),gsap.fromTo([R.txt_title,R.instruction,R.btn_play],.5,{display:"block",alpha:0},{alpha:1}),gsap.fromTo(R.colonel,.5,{display:"block",left:-196},{left:0,onComplete:t})}return{fn_STEP1:e,fn_STEP3:o}}(),U=(a="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.5.1/Draggable.min.js",d="#container #controller_container",r="#container #controller_mid_btn",l="#container #controller_up_btn",c="#container #controller_down_btn",u="#container #player",p="#container .controller_btn",m=!1,f=null,v=1,h=!0,g=function(){$.getScript(a,_)},_=function(){let e=0,t=0,o=660,n=500,s="rgba(0,0,255,0)",i=660,a=500,p=gsap.getProperty(u,"top");$("#MAINPANEL").append("<div id='controller_container'><div id='controller_mid_btn'></div><div id='controller_up_btn' class='controller_btn'></div><div id='controller_down_btn' class='controller_btn'></div></div>"),$(d).css({left:e,top:t,width:o,height:n,backgroundColor:s,display:"none"}),$(r).css({top:0,width:"100%",height:"100%",backgroundColor:"rgba(255,0,255,0)"}),$(l).css({top:p-a-40,width:i,height:a,backgroundColor:"rgba(0,0,255,0)"}),$(c).css({top:p+20,width:i,height:a,backgroundColor:"rgba(255,0,0,0)"}),b()},b=function(){E.is_mobile?($(p).bind("touchstart mousedown",w),$(p).bind("touchend mouseup",T),Draggable.create(r,{zIndexBoost:!1,type:"y",onDrag:function(){this.y<0?y():this.y>0&&k()},onDragEnd:function(){T(),gsap.set(r,{y:0})}})):($(d).hide(),$(document).keydown(w),$(document).keyup(T))},w=function(e){38==e.keyCode||"controller_up_btn"==this.id?(e.preventDefault(),y()):40!=e.keyCode&&"controller_down_btn"!=this.id||(e.preventDefault(),k())},y=function(){m=!0,f=!0},k=function(){m=!0,f=!1},C=function(e){if(m){let e=[132,263,394],t=[-125,0,125],o=.3;f?0!==v&&h&&(h=!1,v--,gsap.to(d,o,{top:t[v],ease:"none"}),gsap.to(u,o,{top:e[v],ease:"none",onComplete:()=>h=!0})):v<e.length-1&&h&&(h=!1,v++,gsap.to(d,o,{top:t[v],ease:"none"}),gsap.to(u,o,{top:e[v],ease:"none",onComplete:()=>h=!0}))}},T=function(e){m=!1},x=function(e){E.is_mobile?($(d).show(),$(p).bind("touchstart mousedown",w),$(p).bind("touchend mouseup",T)):($(d).hide(),$(document).keydown(w),$(document).keyup(T)),gsap.ticker.add(C)},S=function(e){m=!1,v=1,$(d).css({top:0}),E.is_mobile?($(d).hide(),$(p).unbind("touchstart mousedown"),$(p).unbind("touchend mouseup")):($(document).off("keydown"),$(document).off("keyup")),gsap.ticker.remove(C)},I=function(e){m=!1,E.is_mobile?($(d).hide(),$(p).unbind("touchstart mousedown"),$(p).unbind("touchend mouseup")):($(document).off("keydown"),$(document).off("keyup")),gsap.ticker.remove(C)},{INIT:g,START:x,RESET:S,STOP:I}),j=function(){var e="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.11.5/TextPlugin.min.js",t="#game_content",o=[150,282,416],n=0,s={origin:660,width:50,height:60,positions:[0,2,1,0,1,2,0,2,1,0,1,2,1,0,1,2,0,2,1,0,1,2,1,0,1,2,0,2,1,0,1,2,1,0,1,2,0,2,1,0],speed:1.82,interval:.6,current_count:0,max_count:40,url:"src/sprite.png"},i=function(){$.getScript(e)},a=function(){c(),u(),m(),U.START()},d=function(){let e="#player";s.current_count=0,n=0,r(),v(n),U.RESET(),$("div.npc").remove(),gsap.set(e,{top:263,left:80}),gsap.set(R.touchdown,{right:-360}),R.character.removeClass("dance")},r=function(){U.STOP(),gsap.killTweensOf(".npc, .npc div"),gsap.killTweensOf(m)},l=function(e){let n="#npc_"+e,i=["bucket","chicken","opponent1","opponent2"];switch($(t).prepend("<div id='npc_"+e+"' class='npc' ><div class='sprite shadow'></div><div class='items sprite'></div></div>"),$(n).css({left:s.origin,top:o[s.positions[e]],width:s.width,height:s.height-2}),2==s.positions[e]&&gsap.set(n,{zIndex:1}),$(n+" div").css({left:-40,top:-130}),$(n+" .items").addClass(i[Math.floor(Math.random()*i.length)]),s.positions[e]){case 0:$(n).addClass("top");break;case 1:$(n).addClass("mid");break;case 2:$(n).addClass("bot")}},c=function(){gsap.fromTo(R.field,.8,{left:0},{left:-355,ease:"none",repeat:-1}),gsap.fromTo(R.crowd,.9,{left:0},{left:-353,ease:"none",repeat:-1}),R.crowd.addClass("animate")},u=function(){R.character.addClass("run"),R.player.show()},p=function(e){function t(){gsap.set(R.character,{alpha:1}),R.ready=!0,R.stars.removeClass("animate")}var o=e+" .items";$(o).hasClass("bucket")?(R.sndURL[1].currentTime=0,R.sndURL[1].play(),n+=10,document.getElementById("plus").innerHTML="+10",gsap.fromTo(R.plus,.4,{alpha:1,top:-20},{alpha:0,top:-100,ease:"power2.in"}),v(n),$(e).hide()):$(o).hasClass("chicken")?(R.sndURL[2].currentTime=0,R.sndURL[2].play(),n+=5,document.getElementById("plus").innerHTML="+5",gsap.fromTo(R.plus,.4,{alpha:1,top:-20},{alpha:0,top:-100,ease:"power2.in"}),v(n),$(e).hide()):($(o).hasClass("opponent1")||$(o).hasClass("opponent2"))&&(R.sndURL[3].currentTime=0,R.sndURL[3].play(),R.ready=!1,gsap.fromTo(R.character,2.8,{alpha:.5},{alpha:.5,onComplete:t}),R.stars.addClass("animate"))},m=function(){let e=s.current_count,t=s.max_count,o=s.speed,n=s.width,i=s.interval,a="#npc_"+e;l(e),gsap.to(a,{duration:o,left:-Math.abs(n+100),ease:"none",onUpdate:()=>f(e),onComplete:()=>h(e)}),($(a+" .items").hasClass("chicken")||$(a+" .items").hasClass("bucket"))&&$(a+" .shadow").show(),e<t-1&&gsap.delayedCall(i,m),s.current_count+=1},f=function(e){let t="#crosshair",o="#npc_"+e,n=$("#player").offset().top/E.stageScale;_($(t),$(o))&&R.ready&&($(o).removeClass("ready"),p(o)),n<=253?($(o).hasClass("top")&&$(o).css("z-index",0),$(t).css("z-index",1),$(o).hasClass("mid")&&$(o).css("z-index",2)):n>=273&&($(o).hasClass("mid")&&$(o).css("z-index",0),$(o).hasClass("top")&&$(o).css("z-index",0),$(t).css("z-index",1))},v=function(e){let t="#score";e<=9?gsap.set(t,{text:"00"+e}):n<=99?gsap.set(t,{text:"0"+e}):gsap.set(t,{text:e})},h=function(e){let t=s.max_count-1;$("#npc_"+e).remove(),e===t-1&&(U.STOP(),g())},g=function(){function e(){R.character.removeClass("run"),R.character.addClass("dance"),R.stars.removeClass("animate"),gsap.set(R.character,{alpha:1}),document.getElementById("txt_points").innerHTML="You got "+R.score+" points. Nice job!",A.fn_STEP3()}gsap.fromTo(R.touchdown,.81,{right:-360},{delay:.14,right:0,ease:"none",onComplete:function(){gsap.killTweensOf(R.field),gsap.killTweensOf(R.crowd),gsap.fromTo(R.player,1,{left:80},{left:580,ease:"none",onComplete:e})}})},_=function(e,t){var o=e.offset().left/E.stageScale,n=e.offset().top/E.stageScale,s=e.outerHeight(!0),i=e.outerWidth(!0),a=n+s,d=o+i,r=t.offset().left/E.stageScale,l=t.offset().top/E.stageScale,c=t.outerHeight(!0),u=t.outerWidth(!0),p=l+c,m=r+u;return!(a<l||n>p||d<r||o>m)};return{INIT:i,START:a,RESET:d,STOP:r}}(),O=function(){function e(){R.btn_sound=$("#btn_sound"),R.sound=$("#sound"),R.initSound=!1,R.sndURL=[new Audio("src/audio/bgm.mp3"),new Audio("src/audio/chickenbucket.mp3"),new Audio("src/audio/chickenpiece.mp3"),new Audio("src/audio/hurt.mp3"),new Audio("src/audio/playagain.mp3")],R.sndURL[0].loop=!0,R.btn_sound.on("click",t),R.sndURL[0].onplay=function(){R.btn_sound.css({pointerEvents:"auto",opacity:1})},E.is_safari&&R.sound.addClass("mute")}function t(){var e=R.sound.hasClass("mute");if(e){if(R.sound.removeClass("mute"),R.btn_videoplay.is(":visible"))for(let e=0;e<=4;e++)R.sndURL[e].muted=!1;R.video.get(0).muted=!1,R.btn_videosound.hide(),R.video.get(0).muted=!1,R.video.get(0).volume=1,R.video.get(0).removeAttribute("muted")}else{R.sound.addClass("mute");for(let e=0;e<=4;e++)R.sndURL[e].muted=!0;R.video.get(0).muted=!0}}return{init:e}}(),z=function(){function e(){R.sound=$("#sound"),R.video.on("play",a),R.video.on("ended",r),R.video.on("timeupdate",d),R.video.on("error",o),E.is_safari||R.video.on("playing",t),R.video.attr("autoplay")&&R.videoPlayer.show(),R.video.get(0).src=R.vidURL[R.currentVideo],R.video.get(0).load(),R.video.get(0).volume=0,R.userInit||(R.timer=setTimeout(function(){R.btn_videoplay.show()},4e3))}function t(){R.video.off("playing"),R.video.get(0).removeAttribute("autoplay"),R.video.get(0).removeAttribute("muted"),R.sound.hasClass("mute")?R.video.get(0).muted=!0:(R.video.get(0).muted=!1,R.video.get(0).volume=1)}function o(){R.video.get(0).src=R.vidURL[0],R.video.get(0).load(),R.video.get(0).volume=0,s()}function n(){var e=R.videoPlayer.html();e=$(e).removeAttr("autoplay"),R.video.off("play"),R.video.off("ended"),R.video.off("timeupdate"),R.video.on("error"),R.videoPlayer.html("")}function s(){R.videoHolder.show(),R.btn_videoplay.hide(),R.replay&&(R.userInit=!0,R.replay=!1),R.video.get(0).play()}function i(){R.btn_videoplay.show(),R.video.get(0).pause()}function a(){if(!R.videoStatus[0]){if(R.videoStatus[0]||R.btn_videoplay.is(":visible")||(R.videoStatus[0]=!0),!R.sndURL[0].muted)for(let e=0;e<=4;e++)R.sndURL[e].muted=!0;R.sound.hasClass("mute")&&(R.video.get(0).muted=!0)}}function d(e){var t=e.currentTarget.currentTime/e.currentTarget.duration;!R.videoStatus[1]&&t>=.25?R.videoStatus[1]=!0:!R.videoStatus[2]&&t>=.5?R.videoStatus[2]=!0:!R.videoStatus[3]&&t>=.75&&(R.videoStatus[3]=!0),R.userInit&&!R.sound.hasClass("mute")&&(R.userInit=!1,R.video.get(0).muted=!1,R.video.get(0).volume=1,R.video.get(0).removeAttribute("muted")),e.currentTarget.currentTime>=.1&&R.btn_videoplay.hasClass("init")&&(R.btn_videoplay.removeClass("init"),clearTimeout(R.timer),R.btn_videoplay.hide(),(E.is_mobile&&R.video.prop("muted")||E.is_safari)&&R.btn_videosound.show(),R.btn_sound.css({pointerEvents:"auto",opacity:1}))}function r(){if(R.video.get(0).removeAttribute("autoplay"),R.video.get(0).pause(),R.video.get(0).currentTime=0,R.btn_videosound.hide(),R.btn_videoplay.show(),R.videoStatus=[!1,!1,!1,!1],R.replay=!0,!R.sound.hasClass("mute"))for(let e=0;e<=4;e++)R.sndURL[e].muted=!1}return{init:e,destroy:n,playVideo:s,pauseVideo:i}}();P.init()})();