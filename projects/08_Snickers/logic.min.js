(function(){var e,t,s,n,r,c=(e=["src/logo.png","src/spr_social.png","src/spr_char.jpg","src/spr_snickers.png","src/glow.png","src/spr_chili.png","src/spr_bean.png","src/spr_caramel.png","src/instruction.png","src/copy.png","src/trynow.png","src/char_bg.jpg","src/spr_message.png"],t=["https://cdnjs.cloudflare.com/ajax/libs/gsap/3.11.5/gsap.min.js","https://cdnjs.cloudflare.com/ajax/libs/gsap/3.11.5/CustomEase.min.js"],s=0,n=e.length+t.length,r="ontouchstart"in document.documentElement,{loadedAssets:s,totalAssets:n,init_Images:e,init_JS:t,is_mobile:r}),o=function(){function e(){t(c.init_Images),s(c.init_JS)}function t(e){for(let t=0;t<e.length;t++){let s=e[t];$("<img />").attr("src",s).on("load",n)}}function s(e){for(let t=0;t<e.length;t++){let s=e[t];$.getScript(s,n)}}function n(){c.loadedAssets+=1,c.loadedAssets==c.totalAssets&&p.init()}return{init:e}}(),a={},p=function(){function e(){a.mainPanel=$("#mainPanel"),a.confetti=$("#confetti"),a.highlight=$("#highlight"),a.btn_snickers0=$("#btn_snickers0"),a.btn_snickers1=$("#btn_snickers1"),a.btn_snickers2=$("#btn_snickers2"),a.char0=$("#char0"),a.char1=$("#char1"),a.char2=$("#char2"),a._char0=$("#_char0"),a._char1=$("#_char1"),a._char2=$("#_char2"),a.instruction=$("#instruction"),a.copy=$("#copy"),a.btn_trynow=$("#btn_trynow"),a.spr_message=$("#spr_message"),a.button=$(".button"),a.snickers=$(".snickers"),a.crosshair=$("#crosshair"),a.target=$(".target"),a.characters=$(".characters"),a.spr_chars=$(".spr_chars"),a.cir_char=$(".cir_char"),a.timer=null,a.timer_2sec=null,a.userInit=!1,a.snickersNum=[0,1,2],a.gametime=!1,a.wiggle=15,a.zero=0,a.is_step1=!0,a.incorrect=[!1,!1,!1],a.correct=!1,a.initHover=[!1,!1,!1],a.scale=1,l.fn_scaling(),$(window).resize(l.fn_scaling),l.fn_STEP1()}return{init:e}}(),l=function(){function e(){a.button.on("click",n),a.button.css("cursor","pointer"),g.init(),t()}function t(){function e(){gsap.fromTo(a.characters,.5,{scale:.6,autoAlpha:0},{scale:1,autoAlpha:1,stagger:.25,ease:"hop"}),gsap.to($("#btn_snickers"+a.snickersNum[0]),.2,{delay:.9,top:418,onComplete:function(){v($("#btn_snickers"+a.snickersNum[0]))}}),gsap.to($("#btn_snickers"+a.snickersNum[1]),.2,{delay:1.3,top:418,onComplete:function(){a.wiggle=15,v($("#btn_snickers"+a.snickersNum[1]))}}),gsap.to($("#btn_snickers"+a.snickersNum[2]),.2,{delay:1.7,top:418,onComplete:function(){a.wiggle=15,v($("#btn_snickers"+a.snickersNum[2])),gsap.to(a.instruction,.3,{delay:.3,autoAlpha:1,onComplete:t})}})}function t(){gsap.set(a.snickers,{"pointer-events":"auto"})}a.is_step1=!1,clearTimeout(a.timer_2sec),w(a.snickersNum),gsap.set($("#btn_snickers"+a.snickersNum[0]),{left:99}),gsap.set($("#btn_snickers"+a.snickersNum[1]),{left:295}),gsap.set($("#btn_snickers"+a.snickersNum[2]),{left:491}),a.mouseIsDown=!1,c.is_mobile?(a.mainPanel.on("touchmove",o),a.snickers.on("touchstart",p),$(window).on("touchend",l)):(a.mainPanel.on("mousemove",o),a.snickers.on("mousedown",p),a.snickers.on("mouseover",u),$(window).on("mouseup",l)),a.gametime=!0,gsap.to(a.copy,.2,{delay:.3,autoAlpha:1,onComplete:e}),CustomEase.create("hop","M0,0,C0,0,0.052,1.264,0.204,1.264,0.302,1.264,0.344,0.934,0.458,0.934,0.61,0.934,0.59,1.122,0.646,1.122,0.704,1.122,0.682,0.98,0.758,0.98,0.85,0.98,0.858,1.058,0.902,1.022,0.964,0.97,1,1,1,1"),a.gameInterval=setInterval(_,100)}function s(){a.btn_trynow.show(),clearInterval(a.gameInterval)}function n(){switch(a.initSound&&(a.initSound=!1,a.sndURL[0].play()),this.id){case"btn_fb":window.open("https://www.facebook.com/snickers/","_blank");break;case"btn_tw":window.open("https://twitter.com/SNICKERS","_blank");break;case"btn_in":window.open("https://www.instagram.com/snickers/","_blank");break;case"btn_yt":window.open("https://www.youtube.com/c/SnickersBrand","_blank");break;case"btn_trynow":window.open("https://www.snickers.com/","_blank")}}function r(){a.btn_snickers0.is(":visible")||a.btn_snickers1.is(":visible")||a.btn_snickers2.is(":visible")||(a.gametime=!1,gsap.set(a.snickers,{display:"block","pointer-events":"none",scale:.86,top:410,x:0,y:0}),gsap.set(a.btn_snickers0,{left:77}),gsap.set(a.btn_snickers1,{left:295}),gsap.set(a.btn_snickers2,{left:512}),gsap.to(a.instruction,.2,{autoAlpha:0}),gsap.set(a.copy,{backgroundPositionY:"-85px"}),gsap.to(a.characters,.2,{scale:.9,top:203}),gsap.to(a.char0,.2,{left:66}),gsap.to(a.char2,.2,{left:502}),gsap.set(a.spr_chars,{backgroundPositionX:"-826px"}),s(),a.sndURL[1].play())}function o(e){if(a.mouseIsDown){var t=$(this).parent().offset(),s=(e.pageX-t.left)/a.scale,n=(e.pageY-t.top)/a.scale,r=a.crosshair.position().left/a.scale,i=a.crosshair.position().top/a.scale;if(c.is_mobile){e.preventDefault();var o=e.originalEvent.touches[0]||e.originalEvent.changedTouches[0];s=o.pageX/a.scale,n=o.pageY/a.scale}gsap.set("#"+a.activeSnicker,{left:s-280,top:n-25}),gsap.set(a.crosshair,{left:s-200,top:n-8}),a.incorrect[0]&&(r<65||r>218||i<173||i>324)&&m(),a.incorrect[1]&&(r<305||r>460||i<173||i>324)&&m(),a.incorrect[2]&&(r<552||r>704||i<173||i>324)&&m()}}function p(e){e.preventDefault(),a.mouseIsDown=!0,a.activeSnicker=this.id,gsap.to(a.instruction,.2,{autoAlpha:0}),gsap.set(a.snickers,{zIndex:0}),gsap.set(this,{zIndex:1,scale:.8})}function l(e){a.gametime&&(a.mouseIsDown=!1,a.correct?a.incorrect=[!1,!1,!1]:d(),a.correct=!1,h(),m())}function u(e){a.wiggle=10,v(this)}function h(){for(var e=0;e<3;)b(a.crosshair,$("#target0"))&&"btn_snickers0"==a.activeSnicker&&(f(a._char0,"-561px"),k("spr_chili"),gsap.fromTo(a.highlight,.2,{left:10,autoAlpha:0},{autoAlpha:1}),$("#target0").hide()),b(a.crosshair,$("#target1"))&&"btn_snickers1"==a.activeSnicker&&(f(a._char1,"-561px"),k("spr_bean"),gsap.fromTo(a.highlight,.2,{left:252,autoAlpha:0},{autoAlpha:1}),$("#target1").hide()),b(a.crosshair,$("#target2"))&&"btn_snickers2"==a.activeSnicker&&(f(a._char2,"-561px"),k("spr_caramel"),gsap.fromTo(a.highlight,.2,{left:496,autoAlpha:0},{autoAlpha:1}),$("#target2").hide()),e++;gsap.set(a.crosshair,{left:0,top:0,x:0,y:0})}function _(){if(a.mouseIsDown)for(var e=0;e<3;)b(a.crosshair,$("#target"+e))&&(b(a.crosshair,$("#target0"))&&!a.incorrect[0]&&("btn_snickers0"==a.activeSnicker?(f(a._char0,"-561px"),a.correct=!0):(f(a._char0,"-296px"),r(),a.sndURL[4].currentTime=0,a.sndURL[4].play(),a.wiggle=20,v(a.char0)),a.incorrect[0]=!0),b(a.crosshair,$("#target1"))&&!a.incorrect[1]&&("btn_snickers1"==a.activeSnicker?(f(a._char1,"-561px"),a.correct=!0):(f(a._char1,"-296px"),r(),a.sndURL[3].currentTime=0,a.sndURL[3].play(),a.wiggle=20,v(a.char1)),a.incorrect[1]=!0),b(a.crosshair,$("#target2"))&&!a.incorrect[2]&&("btn_snickers2"==a.activeSnicker?(f(a._char2,"-561px"),a.correct=!0):(f(a._char2,"-296px"),r(),a.sndURL[2].currentTime=0,a.sndURL[2].play(),a.wiggle=20,v(a.char2)),a.incorrect[2]=!0)),e++}function m(){a.correct=!1,a.incorrect[0]&&(f(a._char0,"-31px"),a.incorrect[0]=!1),a.incorrect[1]&&(f(a._char1,"-31px"),a.incorrect[1]=!1),a.incorrect[2]&&(f(a._char2,"-31px"),a.incorrect[2]=!1)}function f(e,t){gsap.set(e,{backgroundPositionX:t})}function d(){gsap.set(a.snickers,{top:418,x:0,y:0,scale:1}),gsap.set($("#btn_snickers"+a.snickersNum[0]),{left:99}),gsap.set($("#btn_snickers"+a.snickersNum[1]),{left:295}),gsap.set($("#btn_snickers"+a.snickersNum[2]),{left:491})}function k(e){function t(e){gsap.to(e,s(1.8,5),{y:l,ease:"none"}),gsap.to(e,s(2,4),{x:"+=100",rotationZ:s(-360,360),repeat:-1,yoyo:!0,ease:"sine.inOut"}),gsap.to(e,s(2,5),{repeat:1,yoyo:!0,ease:"sine.inOut",delay:-5})}function s(e,t){return e+Math.random()*(t-e)}function n(){function e(){a.confetti.hide(),a.confetti.html("")}for(i=0;i<o.length;i++)gsap.to(a.confetti,.2,{alpha:0,onComplete:e})}$("#"+a.activeSnicker).hide();var c=document.getElementById("confetti"),o=[],p=30,l=2600;for("spr_chili"==e?(o=["chili_0","chili_1","chili_2","chili_3","chili_4","chili_5"],gsap.set(a.spr_message,{backgroundPositionY:"0px"})):"spr_bean"==e?(o=["bean_0","bean_1","bean_2","bean_3","bean_4","bean_5"],gsap.set(a.spr_message,{backgroundPositionY:"-36px"})):(o=["caramel_0","caramel_1","caramel_2","caramel_3","caramel_4","caramel_5"],gsap.set(a.spr_message,{backgroundPositionY:"-72px"})),i=0;i<p&&0!==p;i++){var g=document.createElement("div"),u=o[Math.floor(Math.random()*o.length)];gsap.set(g,{className:e+" "+u,scale:s(.5,1),left:s(-50,680),top:s(-700,-50),rotation:s(-360,360)}),c.appendChild(g),t(g)}setTimeout(n,3500),gsap.set([a.confetti,a.spr_message],{autoAlpha:1,display:"block"}),gsap.to([a.highlight,a.spr_message],.2,{delay:3.5,autoAlpha:0,onComplete:r}),a.sndURL[5].play()}function b(e,t){var s=e.offset().left/a.scale,n=e.offset().top/a.scale,r=e.outerHeight(!0),i=e.outerWidth(!0),c=n+r,o=s+i,p=t.offset().left/a.scale,l=t.offset().top/a.scale,g=t.outerHeight(!0),u=t.outerWidth(!0),h=l+g,_=p+u;return!(c<l||n>h||o<p||s>_)}function w(e){for(var t,s,n=e.length;0!==n;)s=Math.floor(Math.random()*n),n-=1,t=e[n],e[n]=e[s],e[s]=t;return e}function v(e){$(e).each(function(){y(this,"rotation",-5,5),y(this,"x",-5,5),y(this,"y",-5,5)})}function y(e,t,s,n){if(a.wiggle==a.zero)gsap.set(e,{rotation:0,x:0,y:0});else{a.wiggle--;var r={ease:"power1.inOut",onComplete:y,onCompleteParams:[e,t,s,n]};r[t]=Math.random()*(n-s)+s,gsap.to(e,.04,r)}}function x(){var e=$("#container").css("transform");if("none"!=e){var t=e.split("(")[1],s=(t=t.split(")")[0],t=t.split(","),t[0]),n=t[1];a.scale=Math.sqrt(s*s+n*n)}else a.scale=1}return{fn_STEP1:e,fn_STEP2:t,fn_scaling:x}}(),g=function(){function e(){a.initSound=!0,a.sndURL=[new Audio("src/audio/bgm.mp3"),new Audio("src/audio/sfx_AllCorrect.mp3"),new Audio("src/audio/sfx_IndecisiveIncorrect.mp3"),new Audio("src/audio/sfx_IrritableIncorrect.mp3"),new Audio("src/audio/sfx_WimpyIncorrect.mp3"),new Audio("src/audio/sfx_CorrectSound.mp3")],a.sndURL[0].volume=.2,a.sndURL[0].loop=!0;for(let e=1;e<a.sndURL.length;e++)a.sndURL[e].volume=.7}return{init:e}}();o.init()})();