(function(){var e,n,t,o,a,s,c,i,r,l,u,p,g,d,_,m,f,h,b,S,T,E,k,C,N,O,w=(e=0,n=[["#background","src/background.jpg"],[".instruction_spr","src/instruction_spr.png"],[".buttons_spr","src/buttons_spr.png"],[".game_bg","src/game_bg.png"],[".game_spr","src/game_spr.png"],[".facts_spr","src/facts_spr.png"],["#bolt_img","src/bolt_img.png"],[".status_spr","src/status_spr.png"],["#instruction_copy","src/instruction_copy.png"]],t=["https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.2/gsap.min.js"],o=function(){s(n),c(t)},a=function(){const o=n.length+t.length;e++,e==o&&i()},s=function(e){for(let n=0;n<e.length;n++){let t=e[n][1];$("<img />").attr("src",t).on("load",a)}},c=function(e){for(let n=0;n<e.length;n++){let t=e[n];$.getScript(t,a)}},i=function(){for(let e=0;e<n.length;e++)$(n[e][0]).css("background-image","url("+n[e][1]+")");$(A.button).on("click",I.MOUSECLICK),A.desktop&&($(A.button).css("cursor","pointer"),$(A.button).hover(I.MOUSEOVER,I.MOUSEOUT)),y.initclick(),y.autoscale(),v.STEP_1()},r=function(){void 0!==U&&Howler.unload(),A.end=!0,gsap.killTweensOf("*")},{init:o,pre_images:n,ended:r}),y={initclick:function(e){function n(){$(window).off("click")}$(window).on("click",n)},clickdelay:function(e){A.isButtonReady=!1,setTimeout(function(){A.isButtonReady=!0},1e3*e)},autoscale:function(){function e(){var e=$("#ad_container").css("transform");if("none"!=e)try{var n=e.split("(")[1];n=n.split(")")[0],n=n.split(",");var t=n[0],o=n[1];A.stageScale=Math.sqrt(t*t+o*o)}catch(e){A.stageScale=1}else A.stageScale=1}$(window).resize(e),e()}},I={MOUSECLICK:function(e){if(A.isButtonReady)switch(y.clickdelay(.2),this.id){case"learnmore_btn":window.open("https://www.electrifyamerica.com/","_blank");break;case"playagain_btn":$("#playagain_btn").css({pointerEvents:"none"}),$("#learnmore_btn").css({pointerEvents:"none"}),gsap.to(A.result,.5,{alpha:0,onComplete:v.GAME_START});break;case"hittheroad_btn":$("#hittheroad_btn").css({pointerEvents:"none"}),gsap.to(A.INSTRUCTION_PANEL,.5,{alpha:0,onComplete:v.GAME_START})}}},A={desktop:!("ontouchstart"in document.documentElement),zero:0,stageScale:1,isButtonReady:!0,container:"#container",button:"#container .button",background:"#container #background",INTRO_PANEL:"#container #INTRO_PANEL",INSTRUCTION_PANEL:"#container #INSTRUCTION_PANEL",instruction_txt:"#container #INSTRUCTION_PANEL #instruction_txt",GAME_PANEL:"#container #GAME_PANEL",game_container:"#container #game_container",result:"#container #game_container #game_result",end:!1},v={STEP_1:function(){$(A.INTRO_PANEL).css({display:"block",zIndex:1}),U.INIT(),this.STEP_2(),A.desktop||$(A.instruction_txt).css({backgroundPositionY:"bottom"})},STEP_2:function(){$(A.INSTRUCTION_PANEL).css({display:"block",zIndex:1}),$(A.game_container).show(),$("#logo").show(),P.INIT()},GAME_START:function(){$(A.INSTRUCTION_PANEL).hide(),P.RESET(),P.START()},GAME_END:function(){}},L=(l="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.2/Draggable.min.js",u="#container #controller_container",p="#container #controller_left_btn",g="#container #controller_right_btn",d="#container #game_container .game_catcher",_="#container .controller_btn",m=!1,f=null,h=null,b=!0,S=function(){$.getScript(l,T)},T=function(){let e=296,n=0,t=360,o=500,a="transparent",s=70,c=500,i=t/2-s/2;$(A.container).append("<div id='controller_container'><div id='controller_left_btn' class='controller_btn'></div><div id='controller_right_btn' class='controller_btn'></div></div>"),$(u).css({left:e,bottom:n,width:t,height:o,backgroundColor:a}),$(p).css({left:i-590,top:0,width:590,height:c,backgroundPosition:"center",backgroundSize:"100%",backgroundColor:"rgba(0,0,255,0)"}),$(g).css({left:i+s,top:0,width:590,height:c,backgroundPosition:"center",backgroundSize:"100%",backgroundColor:"rgba(255,0,0,0)"}),gsap.set(d,{left:t/2-s/2}),E()},E=function(){A.desktop?($(u).hide(),$(document).keydown(k),$(document).keyup(N)):($(_).bind("touchstart mousedown",k),$(_).bind("touchend mouseup",N))},k=function(e){37==e.keyCode||"controller_left_btn"==this.id?(m=!0,f=!0):39!=e.keyCode&&"controller_right_btn"!=this.id||(m=!0,f=!1)},C=function(e){if(m){let e=[11,100,190,280],n=[160,251,340,432],t=.3;f?(null===h&&(b=!1,h=1,gsap.to(u,t-.1,{left:n[h],ease:"none"}),gsap.to(d,t-.1,{left:e[h],ease:"none",onComplete:function(){b=!0}})),h!=A.zero&&b&&(b=!1,h--,gsap.to(u,t,{left:n[h],ease:"none"}),gsap.to(d,t,{left:e[h],ease:"none",onComplete:function(){b=!0}}))):(null===h&&(b=!1,h=2,gsap.to(u,t-.1,{left:n[h],ease:"none"}),gsap.to(d,t-.1,{left:e[h],ease:"none",onComplete:function(){b=!0}})),h<e.length-1&&b&&(b=!1,h++,gsap.to(u,t,{left:n[h],ease:"none"}),gsap.to(d,t,{left:e[h],ease:"none",onComplete:function(){b=!0}})))}},N=function(e){m=!1},O=function(e){A.desktop?($(u).hide(),$(document).keydown(k),$(document).keyup(N)):($(u).show(),$(_).bind("touchstart mousedown",k),$(_).bind("touchend mouseup",N)),gsap.ticker.add(C)},RESET=function(e){let n=$(u).width()/2-$(d).width()/2;gsap.set(d,{left:n}),m=!1,A.desktop?($(document).off("keydown"),$(document).off("keyup")):($(u).hide(),$(_).unbind("touchstart mousedown"),$(_).unbind("touchend mouseup")),gsap.ticker.remove(C)},STOP=function(e){$(u).width(),$(d).width(),m=!1,A.desktop?($(document).off("keydown"),$(document).off("keyup")):($(u).hide(),$(_).unbind("touchstart mousedown"),$(_).unbind("touchend mouseup")),gsap.ticker.remove(C)},{INIT:S,START:O,RESET:RESET,STOP:STOP}),P=function(){var e=[[".game_spr","src/game_spr.png"]],n="#container #game_container",t="#container #game_container .game_bg",o="#container #game_container #game_bg_container_0",a="#container #game_container #game_bg_container_1",s="#container #game_container #game_bg_container_2",c="#container #game_container #game_content",i="#container #game_container #game_content .obstacles",r="#container #game_container #game_content .game_catcher",l="#container #game_container #game_content #crosshair",u="#container #game_container #game_facts",p="#container #game_container #game_progressbar .status_spr",g="#container #game_container #game_result",d="#container #game_container #game_result #game_result_win_copy",_="#container #game_container #game_result #game_result_lost_copy",m="#container #game_container #game_result .button#playagain_btn",f="#container #game_container #game_result #lost_copy_0",h="#container #game_container #game_result #lost_copy_1",b=["0px","-255px","-510px","-765px","-1020px"],S=[25,25,25,25,25],T=[6,6,8,6,8],E=0,k=null,C=null,N=null,O=[11,100,190,280],w=0,y=0,I=!1,v=[],P=[!1,!1,!1,!1],R=0,x=function(){L.INIT()},M=function(){L.START(),U.PLAY(U.SND_BGM),k=gsap.fromTo(t,6,{top:-3200},{top:0,repeat:-1,ease:"none"}),N=gsap.delayedCall(4,B),V()},D=function(e){k.timeScale(e);for(let n=0;n<v.length;n++)v[n].timeScale(e)},Y=function(){L.STOP(),k.pause(),N.pause(),C.pause(),D(0)},z=function(){L.START(),k.play(),N.play(),C.play(),D(1),K(),N=gsap.delayedCall(4,B)},G=function(){$(t).css({top:-3200}),E=0,k=null,N=null,w=0,y=0,I=!1,v=[],gsap.killTweensOf("*"),$(i).remove(),gsap.set(r,{left:145}),$(p).css({backgroundPositionY:"top"}),K()},V=function(){let e=Math.floor(9*Math.random());switch(e){case 0:H(0);break;case 1:H(1);break;case 2:H(2);break;case 3:H(3);break;case 4:H(0),H(1);break;case 5:H(0),H(2);break;case 6:H(0),H(3);break;case 7:H(1),H(2);break;case 8:H(2),H(3)}C=gsap.delayedCall(2,V)},B=function(){I=!0,w++},j=function(e){let n=e.substring(10),t=v.indexOf(A["obstacle_"+n]);v.splice(t,1),C.play()},H=function(n){let t=1*Math.random()/2+2,o="obstacle_"+E,a=e[0][1],s=Math.floor(100*Math.random());I&&(I=!1,s=100),P[n]=!0,100==s?$(c).append($("<div>",{id:o,class:"obstacles bolt",css:{height:58,backgroundPositionY:"-439px"}})):s>=80?$(c).append($("<div>",{id:o,class:"obstacles",css:{height:186,backgroundPositionY:"-253px"}})):$(c).append($("<div>",{id:o,class:"obstacles",css:{height:127,backgroundPositionY:"-126px"}})),$("#"+o).css({top:-186,left:O[n],width:70,backgroundImage:"url("+a+")",backgroundSize:"70px auto",zIndex:1}),$("#"+o).css({left:O[n]}),A[o]=gsap.to("#"+o,t,{top:500,ease:"none",onUpdate:function(){A.end||F("#"+o)},onComplete:function(){w>=5&&100==s?(Y(),W()):($("#"+o).hasClass("bolt")&&(N=gsap.delayedCall(4,B),K()),$("#"+o).remove(),P[n]=!1)}}),v.push(A[o]),E++},F=function(e){let n=$(r).position().left/A.stageScale,t=$(e).position().left/A.stageScale,o=-20,a=(t-n)/2,s=t-n;Z($(l),$(e))&&(gsap.killTweensOf(e),j(e),C.pause(),$(e).hasClass("bolt")?(Y(),y++,$("#status_"+w).css({backgroundPositionY:"bottom"}),145==n?gsap.to(e,.1,{top:400,left:145,alpha:0,ease:"none"}):gsap.to(e,.1,{top:400,alpha:0,ease:"none"}),gsap.fromTo(u,.2,{z:.01,scale:0,alpha:1,right:S[w-1],backgroundPositionX:b[w-1]},{z:.01,scale:1}),gsap.delayedCall(T[w-1],function(){$(e).remove(),gsap.to(u,.2,{z:.01,scale:0,alpha:0,onComplete:function(){w>=5?W():z()}})}),U.PLAY(U.SND_COLLECT)):(D(.3),gsap.to(i,1,{y:-100,ease:"none"}),gsap.to(e,.1,{rotation:a,scale:1,alpha:.5,x:s,y:o,overwrite:!0,ease:"power2.out",onComplete:function(){gsap.to(e,.3,{alpha:0,ease:"none"})}}),gsap.fromTo(r,.2,{alpha:0},{alpha:1,yoyo:!0,repeat:4,ease:"none",onComplete:function(){gsap.to(i,1,{y:0,ease:"none"}),$(e).remove(),D(1),C.play()}}),U.PLAY(U.SND_COLLIDE)))},K=function(){function e(){k.timeScale(1)}4==w&&2!=R&&(R=2,k.timeScale(0),gsap.to(a,1,{top:500,ease:"none"}),gsap.to(s,1,{top:0,ease:"none",onComplete:e})),2==w&&1!=R&&(R=1,k.timeScale(0),gsap.to(o,1,{top:500,ease:"none"}),gsap.to(a,1,{top:0,ease:"none",onComplete:e})),w<=1&&R!=A.zero&&(R=0,gsap.set(o,{top:0,ease:"none"}),gsap.set([a,s],{top:-500}))},Z=function(e,n){var t=e.offset().left/A.stageScale,o=e.offset().top/A.stageScale,a=e.outerHeight(!0),s=e.outerWidth(!0),c=o+a,i=t+s,r=n.offset().left/A.stageScale,l=n.offset().top/A.stageScale,u=n.outerHeight(!0),p=n.outerWidth(!0),g=l+u,d=r+p;return!(c<l||o>g||i<r||t>d)},W=function(){U.STOP(U.SND_BGM),y>=5?($(_).hide(),$(d).show(),$(m).hide(),U.PLAY(U.SND_SUCCESS)):($(d).hide(),$(_).show(),$(f).html("YOU ONLY COLLECTED "+y),y<=1?$(h).html("LIGHTNING BOLT."):$(h).html("LIGHTNING BOLTS."),$(m).show(),U.PLAY(U.SND_FAIL)),gsap.fromTo(g,.5,{display:"block",alpha:0},{alpha:1}),$("#playagain_btn").css({pointerEvents:"auto"}),$("#learnmore_btn").css({pointerEvents:"auto"})};return{INIT:x,RESULT:W,START:M,STOP:Y,RESET:G,container:n}}(),U={ASSETS:[["SND_BGM",{src:["src/audio/bgm.mp3"],loop:!0,volume:1}],["SND_COLLECT",{src:["src/audio/sfx_collect.mp3"],loop:!1,volume:1}],["SND_COLLIDE",{src:["src/audio/sfx_collide.mp3"],loop:!1,volume:1}],["SND_SUCCESS",{src:["src/audio/sfx_success.mp3"],loop:!1,volume:1}],["SND_FAIL",{src:["src/audio/sfx_fail.mp3"],loop:!1,volume:1}]],ACTIVE_BUTTON:!1,INIT:function(e){if(A.img_audio=".img_audio",A.btn_audio="#btn_audio",$.getScript("https://cdnjs.cloudflare.com/ajax/libs/howler/2.2.3/howler.min.js",U.READY),U.ACTIVE_BUTTON){let e="<div id='btn_audio' class='button'><div class='img_audio center'></div></div>";$(A.container).append(e),$(A.img_audio).css({width:"30px",height:"30px",background:"url(src/img_audio.png) no-repeat",transform:"scale(0.92) translateZ(0) scaleZ(2)"}),$(A.btn_audio).css({right:"8px",top:"8px",width:"45px",height:"45px"})}A.desktop&&($(A.btn_audio).on("click",U.MOUSECLICK),$(A.btn_audio).hover(U.MOUSEOVER,U.MOUSEOUT))},READY:function(e){for(let e=0;e<U.ASSETS.length;e++)U.ASSETS[e][1].preload=!0,U[U.ASSETS[e][0]]=new Howl(U.ASSETS[e][1])},MOUSECLICK:function(e){A.isButtonReady&&(U.ACTIVE?(U.ACTIVE=!1,U.VOLUME_OFF()):(U.ACTIVE=!0,U.VOLUME_ON()))},MOUSEOVER:function(e){$(A.img_audio).css("transform","scale(1) translateZ(0) scaleZ(2)")},MOUSEOUT:function(e){$(A.img_audio).css("transform","scale(0.92) translateZ(0) scaleZ(2)")},PLAY:function(e){e.playing()?U.SEEK(e,0):e.play()},PAUSE:function(e){e.pause()},STOP:function(e){e.stop()},MUTE:function(e){e.volume(0)},UNMUTE:function(e){e.volume(1)},SEEK:function(e,n){e.seek(n)},VOLUME_ON:function(){Howler.volume(1),$(".img_audio").css("background-position-y","0px")},VOLUME_OFF:function(){Howler.volume(0),$(".img_audio").css("background-position-y","-40px")},END:function(e){Howler.unload()},ACTIVE:!0};w.init()})();